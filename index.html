<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°í•˜ë‹¤ - ìš°ë¦¬ ë‘˜ë§Œì˜ ê³ ìœ í•œ 'ê²°' ì°¾ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Serif+KR:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #FDFBF7;
            --accent-gold: #C5A47E;
            --text-main: #2C2C2C;
            --male-color: #5D7D9A;
            --female-color: #D67D88;
        }

        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--primary-bg); color: var(--text-main); }
        h1, h2, h3, h4, .serif-font { font-family: 'Noto Serif KR', serif; }

        .bg-texture {
            background-image: radial-gradient(#E5E7EB 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .question-card { 
            background: white;
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            position: relative;
            overflow: hidden;
        }
        .question-card:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.06); 
            border-color: var(--accent-gold);
        }
        
        input[type="radio"].hidden-radio {
            appearance: none;
            -webkit-appearance: none;
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
            pointer-events: none;
        }

        .hidden-radio:checked + .option-label {
            background-color: #FAF5EB;
            border-color: var(--accent-gold);
            color: #5A4D3B;
            font-weight: 600;
            box-shadow: inset 0 0 0 1px var(--accent-gold);
        }
        .hidden-radio:checked + .option-label::before {
            content: 'âœ”';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-gold);
            font-size: 1rem;
        }
        .option-label { 
            position: relative; 
            transition: all 0.2s ease;
        }

        /* Visual Match Result Styles */
        .couple-visual-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem;
            padding-top: 1.5rem;
            gap: 80px; /* ê°„ê²© ë„“í˜ */
        }
        
        .avatar-circle {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            position: relative;
            z-index: 10;
            border: 3px solid white;
        }
        .avatar-male { color: var(--male-color); border-color: #E6F0F9; }
        .avatar-female { color: var(--female-color); border-color: #FBE6EA; }
        
        /* ê²°ì´ ì´ì–´ì§€ëŠ” íŒŒë™ ì• ë‹ˆë©”ì´ì…˜ (í•˜íŠ¸ ëŒ€ì²´) */
        .connection-line-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140px;
            height: 2px;
            background: #f0f0f0;
            z-index: 1;
        }
        
        .connection-wave-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140px;
            height: 40px;
            overflow: hidden;
            z-index: 2;
            display: flex;
            align-items: center;
        }
        
        .connection-wave {
            width: 200%;
            height: 2px;
            background: repeating-linear-gradient(
                90deg,
                var(--male-color) 0%,
                var(--female-color) 50%,
                var(--male-color) 100%
            );
            filter: blur(0.5px);
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
            animation: flowWave 3s linear infinite;
        }
        
        .connection-particles {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 20px;
            z-index: 3;
        }
        .particle {
            position: absolute;
            background: var(--accent-gold);
            border-radius: 50%;
            opacity: 0;
            animation: particleFloat 2s infinite;
        }
        
        @keyframes flowWave {
            0% { transform: translateX(-50%); }
            100% { transform: translateX(0%); }
        }
        
        @keyframes particleFloat {
            0% { transform: translateX(-40px) scale(0); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateX(40px) scale(0); opacity: 0; }
        }

        .score-ring-container {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 0 auto;
        }
        .score-ring-svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }
        .score-ring-circle-bg {
            fill: none;
            stroke: #F3F4F6;
            stroke-width: 8;
        }
        .score-ring-circle-fg {
            fill: none;
            stroke: url(#gradientMatch);
            stroke-width: 8;
            stroke-dasharray: 502;
            stroke-dashoffset: 502;
            stroke-linecap: round;
            transition: stroke-dashoffset 2s ease-out;
        }
        .score-text-centered {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        
        .result-card-mobile {
            background: white;
            border-radius: 24px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.08);
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.03);
        }

        .match-item {
            border-left: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .match-item.perfect { border-left-color: #F59E0B; background-color: #FFFBEB; }
        .match-item.texture { border-left-color: #3B82F6; background-color: #EFF6FF; }

        .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        
        .tarot-card-lg {
            width: 100%;
            aspect-ratio: 2/3.5;
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            transition: transform 0.5s;
            position: relative;
            overflow: hidden;
        }
        .tarot-overlay {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 20px;
            color: white;
            text-align: center;
        }
        
        /* í™•ë¥  ì„¤ëª… ë°•ìŠ¤ */
        .prob-box {
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            border-radius: 12px;
            padding: 12px;
            margin-top: -10px;
            margin-bottom: 20px;
            position: relative;
            border: 1px solid #e5e7eb;
            box-shadow: 0 2px 6px rgba(0,0,0,0.03);
        }
        .prob-box::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 0 5px;
            border-radius: 50%;
            font-size: 14px;
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="bg-texture min-h-screen text-gray-800">
    
    <nav class="w-full py-5 px-6 border-b border-gray-100 bg-white/80 backdrop-blur-sm fixed top-0 z-50">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-black serif-font tracking-tighter cursor-pointer" onclick="window.location.reload()">
                ê²°<span class="text-sm font-light text-gray-400 ml-1 font-sans">í•˜ë‹¤</span>
            </div>
            <div class="text-xs text-gray-500 tracking-widest hidden md:block">ì„œë¡œì˜ ê²°ì„ ì‡ë‹¤</div>
        </div>
    </nav>

    <div id="main-container" class="container mx-auto p-4 pt-28 pb-24 max-w-5xl">
        
        <header id="intro-section" class="text-center mb-12 py-8">
            <span class="inline-block py-1 px-3 rounded-full bg-gray-100 text-gray-600 text-xs font-bold mb-4 tracking-wider">COUPLE TEST</span>
            <h1 class="text-4xl md:text-5xl font-bold mb-6 text-gray-800 leading-tight">
                ìš°ë¦¬ì˜ <span class="italic text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-pink-500">ê²°</span>ì€<br>ì–´ë–»ê²Œ ë§ë¬¼ë ¤ ìˆì„ê¹Œìš”?
            </h1>
            <p class="mt-4 text-gray-600 max-w-xl mx-auto leading-relaxed font-light">
                24ê°€ì§€ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‘ ì‚¬ëŒë§Œì˜ ê³ ìœ í•œ ë¬´ëŠ¬.<br>
                ì†”ì§í•œ ë‹µë³€ì„ í†µí•´ ìš°ë¦¬ì˜ 'ê²°'ì´ ê·¸ë¦¬ëŠ” ê·¸ë¦¼ì„ í™•ì¸í•´ë³´ì„¸ìš”.
            </p>
        </header>

        <div id="question-section" class="fade-in-up">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 relative">
                <div class="hidden lg:block absolute left-1/2 top-0 bottom-0 w-px bg-gray-200 -ml-px"></div>

                <div>
                    <div class="sticky top-24 bg-white/90 backdrop-blur p-4 rounded-xl border border-gray-100 shadow-sm mb-6 z-10 text-center">
                        <h2 class="text-xl font-bold text-blue-900 serif-font flex items-center justify-center">
                            <span class="text-2xl mr-2">ğŸ¤µâ€â™‚ï¸</span> ë‚¨ì
                        </h2>
                    </div>
                    <div id="male-questions" class="space-y-8 px-1"></div>
                </div>

                <div>
                    <div class="sticky top-24 bg-white/90 backdrop-blur p-4 rounded-xl border border-gray-100 shadow-sm mb-6 z-10 text-center">
                        <h2 class="text-xl font-bold text-pink-900 serif-font flex items-center justify-center">
                            <span class="text-2xl mr-2">ğŸ‘°â€â™€ï¸</span> ì—¬ì
                        </h2>
                    </div>
                    <div id="female-questions" class="space-y-8 px-1"></div>
                </div>
            </div>

            <!-- í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë°” -->
            <div class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t p-4 z-40 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]">
                <div class="max-w-5xl mx-auto relative flex justify-center items-center">
                    <div id="warning-message" class="absolute -top-10 left-0 right-0 text-center text-red-500 text-sm font-bold bg-white py-1 hidden animate-bounce">
                        âš ï¸ ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”!
                    </div>
                    
                    <div class="flex gap-3 w-full max-w-md justify-center">
                        <button id="random-btn" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 font-medium py-3.5 px-6 rounded-xl transition-colors text-sm">
                            ğŸ² ëœë¤ ì±„ìš°ê¸°
                        </button>
                        <button id="calculate-btn" class="flex-[2] bg-gray-900 hover:bg-gray-800 text-white font-bold py-3.5 px-10 rounded-xl shadow-lg transform transition active:scale-95 flex items-center justify-center">
                            <span>ê²°ê³¼ í™•ì¸í•˜ê¸°</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="results" class="hidden">
            
            <!-- A. ë©”ì¸ ê²°ê³¼ ì¹´ë“œ -->
            <div class="max-w-lg mx-auto fade-in-up">
                <div class="result-card-mobile bg-white p-8 text-center relative">
                    <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-400 to-pink-400"></div>
                    
                    <div class="uppercase tracking-widest text-[10px] text-gray-400 mb-8 font-bold">DESTINY RATE</div>
                    
                    <!-- ë¹„ì£¼ì–¼ ë§¤ì¹­ ì• ë‹ˆë©”ì´ì…˜ (í•˜íŠ¸ ì œê±° -> ê²° ì—°ê²° íŒŒë™) -->
                    <div class="couple-visual-container">
                        <div class="connection-line-bg"></div>
                        <div class="connection-wave-container">
                            <div class="connection-wave"></div>
                        </div>
                        <div class="connection-particles">
                            <div class="particle" style="left: 10%; animation-delay: 0s; width: 4px; height: 4px;"></div>
                            <div class="particle" style="left: 50%; animation-delay: 0.5s; width: 6px; height: 6px;"></div>
                            <div class="particle" style="left: 90%; animation-delay: 1s; width: 4px; height: 4px;"></div>
                        </div>
                        
                        <div class="avatar-circle avatar-male animate-bounce-subtle">ğŸ¤µâ€â™‚ï¸</div>
                        <div class="avatar-circle avatar-female animate-bounce-subtle" style="animation-delay: 0.2s">ğŸ‘°â€â™€ï¸</div>
                    </div>

                    <!-- ì›í˜• í™•ë¥  ê·¸ë˜í”„ -->
                    <div class="score-ring-container mb-4">
                        <svg class="score-ring-svg" viewBox="0 0 180 180">
                            <defs>
                                <linearGradient id="gradientMatch" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#5D7D9A" />
                                    <stop offset="100%" style="stop-color:#D67D88" />
                                </linearGradient>
                            </defs>
                            <circle class="score-ring-circle-bg" cx="90" cy="90" r="80"></circle>
                            <circle id="score-ring-circle" class="score-ring-circle-fg" cx="90" cy="90" r="80"></circle>
                        </svg>
                        <div class="score-text-centered">
                            <span class="text-[10px] text-gray-400 uppercase tracking-wider font-bold mb-1">Probability</span>
                            <span id="match-probability-text" class="text-2xl font-black serif-font text-gray-800">0%</span>
                        </div>
                    </div>

                    <!-- í™•ë¥  ì„¤ëª… ë°•ìŠ¤ -->
                    <div class="prob-box mx-auto max-w-xs mb-8">
                        <p id="prob-desc" class="text-xs text-gray-500 leading-relaxed break-keep"></p>
                    </div>
                    
                    <h2 id="couple-title" class="text-2xl md:text-3xl font-bold serif-font text-gray-800 mb-2 break-keep leading-tight"></h2>
                    <p id="result-keyword" class="text-sm text-gray-500 font-medium mb-8"></p>

                    <!-- ìƒì„¸ ë¶„ì„ ì½”ë©˜íŠ¸ ë°•ìŠ¤ -->
                    <div class="bg-gray-50 p-6 rounded-xl text-gray-700 leading-relaxed break-keep text-left border border-gray-100 shadow-inner">
                        <div id="result-one-liner" class="space-y-4 text-sm font-light"></div>
                    </div>
                </div>
            </div>

            <!-- B. ìƒì„¸ ë§¤ì¹­ ë¶„ì„ -->
            <div id="match-detail-section" class="mt-12 max-w-3xl mx-auto fade-in-up delay-100">
                <div class="text-center mb-8">
                    <span class="text-amber-500 text-xs font-bold tracking-widest uppercase mb-2 block">Matching DNA</span>
                    <h3 class="text-2xl font-bold serif-font text-gray-800">ìš°ë¦¬ê°€ í†µí•˜ëŠ” ìˆœê°„ë“¤</h3>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- ì™„ì „ ì¼ì¹˜ -->
                    <div class="bg-white p-6 rounded-2xl border border-orange-100 shadow-sm">
                        <h4 class="font-bold text-amber-600 mb-4 flex items-center text-sm md:text-base">
                            <span class="text-lg mr-2">ğŸ’</span> ì™„ì „ ì¼ì¹˜ (Perfect Match)
                        </h4>
                        <ul id="perfect-match-list" class="space-y-3 text-sm"></ul>
                    </div>

                    <!-- ì„±í–¥ ì¼ì¹˜ -->
                    <div class="bg-white p-6 rounded-2xl border border-blue-100 shadow-sm">
                        <h4 class="font-bold text-blue-600 mb-4 flex items-center text-sm md:text-base">
                            <span class="text-lg mr-2">ğŸ§©</span> ì„±í–¥ ì¼ì¹˜ (Texture Match)
                        </h4>
                        <ul id="texture-match-list" class="space-y-3 text-sm"></ul>
                    </div>
                </div>
            </div>

            <!-- C. ìƒì„¸ í”„ë¡œí•„ -->
            <div class="mt-12 fade-in-up delay-200">
                <div class="bg-white p-6 md:p-8 rounded-3xl shadow-sm border border-gray-100 max-w-4xl mx-auto">
                    <h3 class="text-xl font-bold serif-font text-gray-800 text-center mb-6">ê°ìì˜ 'ê²°' ëª¨ì–‘</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div class="relative h-64 w-full">
                             <canvas id="comparisonRadarChart"></canvas>
                        </div>
                        <div class="space-y-4">
                            <div class="p-4 bg-blue-50/50 rounded-xl border border-blue-100 flex items-center">
                                <span class="text-2xl mr-3">ğŸ¤µâ€â™‚ï¸</span>
                                <div>
                                    <span class="text-xs font-bold text-blue-400 uppercase">ë‚¨ì</span>
                                    <h4 id="result-group-name-male" class="font-bold text-blue-900 serif-font text-sm md:text-base"></h4>
                                    <p id="result-group-description-male" class="text-xs text-gray-500 mt-1"></p>
                                </div>
                            </div>
                            <div class="p-4 bg-pink-50/50 rounded-xl border border-pink-100 flex items-center">
                                <span class="text-2xl mr-3">ğŸ‘°â€â™€ï¸</span>
                                <div>
                                    <span class="text-xs font-bold text-pink-400 uppercase">ì—¬ì</span>
                                    <h4 id="result-group-name-female" class="font-bold text-pink-900 serif-font text-sm md:text-base"></h4>
                                    <p id="result-group-description-female" class="text-xs text-gray-500 mt-1"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- D. íƒ€ë¡œ -->
            <div class="mt-16 fade-in-up delay-300 bg-gray-900 text-white py-12 px-4 -mx-4 md:rounded-3xl md:mx-auto max-w-5xl relative overflow-hidden">
                <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>
                <div class="relative z-10 max-w-3xl mx-auto">
                    <div class="text-center mb-8">
                        <span class="text-amber-400 text-xs font-bold tracking-widest uppercase mb-2 block">íƒ€ë¡œ ë¦¬ë”©</span>
                        <h3 class="text-2xl md:text-3xl font-bold serif-font text-white">íƒ€ë¡œê°€ ë³¸ ìš°ë¦¬ì˜ ì¸ì—°</h3>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="text-center">
                            <div id="male-tarot-img" class="tarot-card-lg mb-2 mx-auto max-w-[150px]">
                                <div class="tarot-overlay"><div id="male-tarot-name" class="font-bold serif-font text-sm"></div></div>
                            </div>
                        </div>
                        <div class="text-center">
                            <div id="female-tarot-img" class="tarot-card-lg mb-2 mx-auto max-w-[150px]">
                                <div class="tarot-overlay"><div id="female-tarot-name" class="font-bold serif-font text-sm"></div></div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-6 bg-white/5 p-6 rounded-xl border border-white/10">
                         <p id="tarot-compatibility-text" class="text-gray-300 leading-relaxed font-light text-sm break-keep"></p>
                         <div class="border-t border-white/10 pt-4 mt-4">
                            <h4 class="text-sm font-bold text-amber-200 mb-2">ğŸ’¡ Advice</h4>
                            <p id="relationship-advice" class="text-gray-400 text-xs leading-relaxed"></p>
                         </div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-12 pb-12">
                <button id="retry-btn" class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-800 font-bold py-4 px-12 rounded-full shadow-sm transition-all transform hover:-translate-y-1">
                    ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°
                </button>
            </div>

        </div>
    </div>

    <script>
        /* --- ë°ì´í„° (24ê°œ ì§ˆë¬¸ - ë¬¸êµ¬ ìˆ˜ì •ë¨) --- */
        const questions = [
            // 1. ACTION (7ê°œ)
            { id: 'q1', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'SNSì— ì‚¬ì§„ì„ ì˜¬ë¦°ë‹¤ë©´, ì£¼ë¡œ ì–´ë–¤ í”¼ë“œë¥¼ ì±„ìš°ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?', options: [ { value: '1', text: 'ì•„ë¦„ë‹¤ìš´ ìì—° í’ê²½', tag: '#ê²½í—˜ì¤‘ì‹œí˜•'}, { value: '2', text: 'ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ì¥ì†Œë‚˜ ë§›ìˆëŠ” ìŒì‹', tag: '#ì„±ì·¨ì§€í–¥í˜•'}, { value: '3', text: 'ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ì¦ê¸°ëŠ” íŒŒí‹°', tag: '#ì‚¬êµí˜•'}, { value: '4', text: 'ê±°ì˜ ëˆˆíŒ…ë§Œ í•˜ê±°ë‚˜ ë¹„ê³µê°œ', tag: '#ì•ˆì •ì§€í–¥í˜•'} ] },
            { id: 'q2', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ê±´ê°•ì„ ìœ„í•´ ìš´ë™ì„ í•œë‹¤ë©´, ì–´ë–¤ ìŠ¤íƒ€ì¼ì´ ë‚˜ì—ê²Œ ë§ë‚˜ìš”?', options: [ { value: '1', text: 'í˜¼ì ì§‘ì¤‘í•˜ëŠ” í—¬ìŠ¤ë‚˜ ëŸ¬ë‹', tag: '#ìê¸°ê³„ë°œí˜•'}, { value: '2', text: 'í•¨ê»˜ í˜¸í¡í•˜ëŠ” í…Œë‹ˆìŠ¤ë‚˜ íŒ€ìŠ¤í¬ì¸ ', tag: '#í™œë™ì ì¸'}, { value: '3', text: 'ê²©í•œ ìš´ë™ë³´ë‹¤ëŠ” ì‚°ì±…ì´ë‚˜ ìˆ¨ì‰¬ê¸°', tag: '#ì •ì ì¸'} ] },
            { id: 'q22', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ë‚˜ì—ê²Œ ê°€ì¥ ì´ìƒì ì¸ ì£¼ë§ì˜ í’ê²½ì€ ë¬´ì—‡ì¸ê°€ìš”?', options: [ { value: '1', text: 'ì§‘ì½•í•˜ë©° ì¡°ìš©íˆ ì—ë„ˆì§€ ì¶©ì „', tag: '#ì§‘ìˆœì´/ì§‘ëŒì´'}, { value: '2', text: 'ìƒˆë¡œìš´ ë°°ì›€ì´ë‚˜ ì·¨ë¯¸ í™œë™ ëª°ì…', tag: '#ìê¸°ê³„ë°œí˜•'}, { value: '3', text: 'ì¹œêµ¬ë“¤ê³¼ ì™ìì§€ê»„í•œ ëª¨ì„', tag: '#ì‚¬êµí˜•'}, { value: '4', text: 'ê°€ê¹Œìš´ ê³³ì´ë¼ë„ í›Œì© ë– ë‚˜ëŠ” ì—¬í–‰', tag: '#ëª¨í—˜ì¶”êµ¬í˜•'} ] },
            { id: 'q28', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ì—¬í–‰ ê³„íšì„ ì§¤ ë•Œ, ë‚˜ëŠ” ì–´ë–¤ ìŠ¤íƒ€ì¼ì— ê°€ê¹ë‚˜ìš”?', options: [ { value: '1', text: 'ë™ì„ ê³¼ ì‹œê°„ê¹Œì§€ ë¶„ ë‹¨ìœ„ë¡œ ê¼¼ê¼¼í•˜ê²Œ', tag: '#ê³„íší˜•'}, { value: '2', text: 'í° í‹€ë§Œ ì¡ê³  ê·¸ë•Œê·¸ë•Œ ììœ ë¡­ê²Œ', tag: '#ììœ ì¶”êµ¬í˜•'}, { value: '3', text: 'ìœ ëª…í•œ ë§›ì§‘ ìœ„ì£¼ë¡œ íƒë°©', tag: '#ê²½í—˜ì¤‘ì‹œí˜•'}, { value: '4', text: 'ê³„íš ì—†ì´ í˜¸ìº‰ìŠ¤ì—ì„œ í‘¹ ì‰¬ê¸°', tag: '#ì•ˆì •ì§€í–¥í˜•'} ] },
            { id: 'q29', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ì„ í˜¸í•˜ëŠ” ë°ì´íŠ¸ ì¥ì†ŒëŠ” ì–´ë””ì¸ê°€ìš”?', options: [ { value: '1', text: 'ìš”ì¦˜ ëœ¨ëŠ” ìƒˆë¡œ ìƒê¸´ í•«í”Œë ˆì´ìŠ¤', tag: '#ê²½í—˜ì¤‘ì‹œí˜•'}, { value: '2', text: 'ì¡°ìš©í•˜ê³  ì•„ëŠ‘í•œ ìš°ë¦¬ë§Œì˜ ë‹¨ê³¨ì§‘', tag: '#ì•ˆì •ì§€í–¥í˜•'}, { value: '3', text: 'í™œë™ì ì¸ í…Œë§ˆíŒŒí¬ë‚˜ ì „ì‹œíšŒ', tag: '#í™œë™ì ì¸'}, { value: '4', text: 'í¸ì•ˆí•œ ì§‘ì—ì„œ ë„·í”Œë¦­ìŠ¤ ë³´ê¸°', tag: '#ì§‘ìˆœì´/ì§‘ëŒì´'} ] },
            { id: 'q30', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ë‚˜ì˜ í‰ì†Œ ì•„ì¹¨ ê¸°ìƒ ìŠ¤íƒ€ì¼ì€?', options: [ { value: '1', text: 'ì•ŒëŒì´ ìš¸ë¦¬ë©´ í•œ ë²ˆì— ë²Œë–¡ (ì•„ì¹¨í˜•)', tag: '#ê³„íší˜•'}, { value: '2', text: '5ë¶„ë§Œ ë”... í•˜ë‹¤ê°€ ê²¨ìš° ê¸°ìƒ (ì˜¬ë¹¼ë¯¸í˜•)', tag: '#ììœ ì¶”êµ¬í˜•'}, { value: '3', text: 'ì¼ì–´ë‚˜ìë§ˆì ë‰´ìŠ¤ë‚˜ í•  ì¼ ì²´í¬', tag: '#ì„±ì·¨ì§€í–¥í˜•'}, { value: '4', text: 'ì—¬ìœ ë¡­ê²Œ ì¹¨ëŒ€ì—ì„œ ë’¹êµ´ê±°ë¦¬ê¸°', tag: '#ì•ˆì •ì§€í–¥í˜•'} ] },
            { id: 'q31', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ì‡¼í•‘ì„ í•  ë•Œ ë‚˜ëŠ” ì£¼ë¡œ ì–´ë–»ê²Œ í–‰ë™í•˜ë‚˜ìš”?', options: [ { value: '1', text: 'í•„ìš”í•œ ëª©ë¡ë§Œ ì ì–´ì„œ ë”± ê·¸ê²ƒë§Œ ì‚°ë‹¤', tag: '#ì‹¤ìš©ì£¼ì˜í˜•'}, { value: '2', text: 'ìµœì €ê°€ì™€ ì„±ëŠ¥ì„ ë¹„êµ ë¶„ì„ í›„ êµ¬ë§¤', tag: '#íš¨ìœ¨ì¤‘ì‹œí˜•'}, { value: '3', text: 'ë‚´ ëˆˆì— ì˜ˆì˜ë©´ ì¼ë‹¨ ì‚¬ê³  ë³¸ë‹¤', tag: '#ì‹¬ë¯¸ì£¼ì˜í˜•'}, { value: '4', text: 'ì„¸ì¼í•  ë•Œ ìƒí•„í’ˆì„ ë¯¸ë¦¬ ìŸì—¬ë‘”ë‹¤', tag: '#í˜„ì‹¤ì£¼ì˜í˜•'} ] },

            // 2. EMOTION (8ê°œ)
            { id: 'q4', type: 'crossover', brainType: 'Emotion (ê°ì •)', text_me: 'ë‚´ê°€ ê¿ˆê¾¸ëŠ” ì´ìƒì ì¸ í”„ëŸ¬í¬ì¦ˆëŠ”?', text_partner: 'íŒŒíŠ¸ë„ˆì—ê²Œ í•´ì£¼ê³  ì‹¶ì€ í”„ëŸ¬í¬ì¦ˆëŠ”?', options: [ { value: '1', text: 'ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸° ì†ì—ì„œ ë¬´ë“œìˆê²Œ', tag: '#ë‚­ë§Œì£¼ì˜í˜•'}, { value: '2', text: 'ë§ì€ ì‚¬ëŒë“¤ ì•ì—ì„œ í™”ë ¤í•œ ì´ë²¤íŠ¸ë¡œ', tag: '#ì´ë²¤íŠ¸ì„ í˜¸'}, { value: '3', text: 'ì¶”ì–µì´ ê¹ƒë“  ì¥ì†Œì—ì„œ ì§„ì†”í•œ ëŒ€í™”ë¡œ', tag: '#ê´€ê³„ì¤‘ì‹¬í˜•'}, { value: '4', text: 'í™”ë ¤í•¨ë³´ë‹¤ ë‹´ë°±í•˜ê²Œ í¸ì§€ì™€ ë°˜ì§€ë¡œ', tag: '#ì‹¤ìš©ì£¼ì˜í˜•'} ] },
            { id: 'q5', type: 'crossover', brainType: 'Emotion (ê°ì •)', text_me: 'ë‚˜ë¥¼ ê°€ì¥ ì„¤ë ˆê²Œ í•˜ëŠ” ì—°ì¸ì˜ í–‰ë™ì€?', text_partner: 'ë‚´ê°€ ì—°ì¸ì—ê²Œ í•´ì£¼ê³  ì‹¶ì€ í–‰ë™ì€?', options: [ { value: '1', text: 'ì§€ë‚˜ê°€ë“¯ í•œ ì‚¬ì†Œí•œ ë§ì„ ê¸°ì–µí•´ì£¼ê¸°', tag: '#ì„¸ì‹¬í•¨ì¤‘ì‹œ'}, { value: '2', text: 'í˜ë“  ë‚  ë§ì—†ì´ ë”°ëœ»í•˜ê²Œ ì•ˆì•„ì£¼ê¸°', tag: '#ìŠ¤í‚¨ì‹­ì¤‘ì‹œ'}, { value: '3', text: 'ë‚˜ì˜ ê¿ˆê³¼ ëª©í‘œë¥¼ ì§„ì‹¬ìœ¼ë¡œ ì‘ì›í•´ì£¼ê¸°', tag: '#ì •ì„œì ì§€ì§€'}, { value: '4', text: 'ë§Œë‚  ë•Œ ìŠ¤ë§ˆíŠ¸í° ì—†ì´ ì˜¤ë¡¯ì´ ì§‘ì¤‘í•´ì£¼ê¸°', tag: '#ì‹œê°„ê³µìœ í˜•'} ] },
            { id: 'q23', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ê³µê³µì¥ì†Œì—ì„œì˜ ìŠ¤í‚¨ì‹­, ì–´ë””ê¹Œì§€ ê´œì°®ë‚˜ìš”?', options: [ { value: '1', text: 'ì† ì¡ê¸° ì •ë„ë§Œ ê´œì°®ë‹¤', tag: '#ë³´ìˆ˜ì ê°€ì¹˜ê´€'}, { value: '2', text: 'ê°€ë²¼ìš´ í¬ì˜¹ì´ë‚˜ ë½€ë½€ê¹Œì§€ëŠ” OK', tag: '#ììœ ë¡œìš´í‘œí˜„'}, { value: '3', text: 'ë‚¨ë“¤ ì‹œì„  ì—†ëŠ” ë‘˜ë§Œì˜ ê³µê°„ì´ ì¢‹ë‹¤', tag: '#ì‚¬ìƒí™œì¤‘ì‹œ'}, { value: '4', text: 'ë¶„ìœ„ê¸°ì™€ ì¥ì†Œì— ë”°ë¼ ê·¸ë•Œê·¸ë•Œ ë‹¤ë¥´ë‹¤', tag: '#ìƒí™©ì ì‘í˜•'} ] },
            { id: 'q26', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ë¹„ ì˜¤ëŠ” ë‚ , ì—°ì¸ì´ íšŒì‚¬ ì•ìœ¼ë¡œ ë°ë¦¬ëŸ¬ ì˜¨ë‹¤ë©´?', options: [ { value: '1', text: 'ì™„ì „ ê°ë™ì´ì•¼! ê³ ë§ˆì›€ì„ ê²©í•˜ê²Œ í‘œí˜„í•œë‹¤', tag: '#ê°ì •í‘œí˜„í˜•'}, { value: '2', text: 'ë¹„ ì˜¤ëŠ”ë° í˜ë“¤ê²Œ ì™œ ì™”ì–´~ (ê±±ì •ë¶€í„° í•¨)', tag: '#ë°°ë ¤í˜•'}, { value: '3', text: 'ë§ˆì¹¨ ë³´ê³  ì‹¶ì—ˆëŠ”ë° ì˜ëë‹¤! (ë‚­ë§Œì )', tag: '#ë‚­ë§Œì£¼ì˜í˜•'}, { value: '4', text: 'ì˜ ì™”ë‹¤, ì–¼ë¥¸ ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°€ì', tag: '#ì‹¤ìš©ì£¼ì˜í˜•'} ] },
            { id: 'q17', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ë‚´ ì—°ì¸ì´ ë‚´ ì¹œêµ¬ì˜ ê¹»ìì„ ë–¼ì–´ì¤€ë‹¤ë©´?', options: [ { value: '1', text: 'ê·¸ëƒ¥ ë§¤ë„ˆë‹ˆê¹Œ, ë³„ ìƒê° ì—†ë‹¤', tag: '#ì¿¨í•œì—°ì• '}, { value: '2', text: 'ê¸°ë¶„ì€ ì¢€ ê·¸ë ‡ì§€ë§Œ ê²‰ìœ¼ë¡œ í‹° ë‚´ì§€ ì•ŠëŠ”ë‹¤', tag: '#ê°ì •ì¡°ì ˆí˜•'}, { value: '3', text: 'ì§ˆíˆ¬ë‚˜ë‹ˆê¹Œ ë‹¤ìŒë¶€í„°ëŠ” ë–¼ì£¼ì§€ ë§ˆ (í‘œí˜„)', tag: '#ê´€ê³„ì¤‘ì‹¬í˜•'}, { value: '4', text: 'ì ˆëŒ€ ì•ˆ ëœë‹¤, ê·¸ ìë¦¬ì—ì„œ ì •ìƒ‰í•  ìˆ˜ë„', tag: '#ì›ì¹™ì£¼ì˜í˜•'} ] },
            { id: 'q18', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'í•¨ê»˜ í‚¤ìš°ê³  ì‹¶ì€ ë°˜ë ¤ë™ë¬¼ ìŠ¤íƒ€ì¼ì€?', options: [ { value: '1', text: 'í™œë™ì ì´ê³  ì• êµ ë§ì€ ê°•ì•„ì§€', tag: '#í™œë™ì ì¸'}, { value: '2', text: 'ì¡°ìš©í•˜ê³  ë…ë¦½ì ì¸ ê³ ì–‘ì´', tag: '#ì°¨ë¶„í•œ'}, { value: '3', text: 'ë³´ëŠ” ê²ƒë§Œ ì¢‹ì•„í•˜ê³  í‚¤ìš¸ ìì‹ ì€ ì—†ë‹¤', tag: '#í˜„ì‹¤ì£¼ì˜í˜•'}, { value: '4', text: 'ë°˜ë ¤ë™ë¬¼ì„ í‚¤ìš¸ ìƒê°ì€ ì—†ë‹¤', tag: '#ê°œì¸ì£¼ì˜í˜•'} ] },
            { id: 'q32', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ì—°ì¸ ì‚¬ì´ì˜ ì—°ë½ ë¹ˆë„, ì–´ëŠ ì •ë„ê°€ ì¢‹ì€ê°€ìš”?', options: [ { value: '1', text: 'ì¼ê±°ìˆ˜ì¼íˆ¬ì¡±ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³µìœ ', tag: '#ê´€ê³„ì¤‘ì‹¬í˜•'}, { value: '2', text: 'ìš©ê±´ì´ ìˆì„ ë•Œë§Œ í•´ë„ ê´œì°®ë‹¤', tag: '#ì‹¤ìš©ì£¼ì˜í˜•'}, { value: '3', text: 'í•˜ë£¨ ì¼ê³¼ ëë‚˜ê³  ìê¸° ì „ í†µí™”ë©´ ì¶©ë¶„', tag: '#ë…ë¦½ì„±ì¤‘ì‹œ'}, { value: '4', text: 'íŠ¹ë³„í•œ ì¼ ì—†ì–´ë„ í‹ˆë‚˜ëŠ” ëŒ€ë¡œ ìì£¼', tag: '#ì„¸ì‹¬í•¨ì¤‘ì‹œ'} ] },
            { id: 'q33', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ë‚˜ì˜ ì§ˆíˆ¬ì‹¬ ê°•ë„ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?', options: [ { value: '1', text: 'ìƒëŒ€ë¥¼ ë¯¿ìœ¼ë‹ˆê¹Œ ê±°ì˜ ì—†ëŠ” í¸ì´ë‹¤', tag: '#ì¿¨í•œì—°ì• '}, { value: '2', text: 'ì§ˆíˆ¬ëŠ” ë‚˜ì§€ë§Œ ì†ìœ¼ë¡œë§Œ ì‚­íŒë‹¤', tag: '#ê°ì •ì¡°ì ˆí˜•'}, { value: '3', text: 'ê·€ì—½ê²Œ íˆ¬ì • ë¶€ë¦¬ë©° í‘œí˜„í•œë‹¤', tag: '#ê°ì •í‘œí˜„í˜•'}, { value: '4', text: 'ì´ì„± ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë§¤ìš° ì˜ˆë¯¼í•˜ë‹¤', tag: '#ì›ì¹™ì£¼ì˜í˜•'} ] },

            // 3. THINKING (9ê°œ)
            { id: 'q11', type: 'similarity', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ì¹œêµ¬ê°€ í™•ì‹¤í•œ íˆ¬ì ì •ë³´ë¥¼ ì¤¬ë‹¤ë©´ ì–´ë–»ê²Œ í• ê¹Œìš”?', options: [ { value: '1', text: 'ì¸ìƒì€ í•œë°©! ëŒ€ì¶œê¹Œì§€ ë°›ì•„ì„œ íˆ¬ì', tag: '#ê³¼ê°í•œíˆ¬ì'}, { value: '2', text: 'ê°€ì§„ í˜„ê¸ˆ ìì‚°ì„ ì „ë¶€ íˆ¬ì', tag: '#ê³µê²©ì íˆ¬ì'}, { value: '3', text: 'ì•ˆì „í•˜ê²Œ ì—¬ìœ  ìê¸ˆì˜ ì¼ë¶€ë§Œ', tag: '#ì•ˆì •ì íˆ¬ì'}, { value: '4', text: 'ë‚´ê°€ ì§ì ‘ ê³µë¶€í•˜ê³  í™•ì‹ í•˜ê¸° ì „ê¹Œì§„ ì•ˆ í•¨', tag: '#ì›ì¹™ì£¼ì˜í˜•'} ] },
            { id: 'q19', type: 'crossover', brainType: 'Thinking (ê°€ì¹˜ê´€)', text_me: 'ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ ë‚˜ì˜ í•´ê²° ë°©ì‹ì€?', text_partner: 'íŒŒíŠ¸ë„ˆê°€ í•´ì¤¬ìœ¼ë©´ í•˜ëŠ” í•´ê²° ë°©ì‹ì€?', options: [ { value: '1', text: 'ì‹œê°„ì„ ë‘ê³  ê°ì •ì„ ê°€ë¼ì•‰íŒ ë’¤ ì°¨ë¶„íˆ', tag: '#ë…¼ë¦¬ì ëŒ€í™”'}, { value: '2', text: 'ì‹¸ì›€ì´ ê¸¸ì–´ì§€ëŠ” ê²Œ ì‹«ì–´ ë¹ ë¥´ê²Œ ì‚¬ê³¼', tag: '#ê°ˆë“±íšŒí”¼í˜•'}, { value: '3', text: 'ìŒ“ì¸ ê°ì •ì„ ì†”ì§í•˜ê²Œ ë‹¤ í† ë¡œí•˜ê¸°', tag: '#ê°ì •í‘œí˜„í˜•'}, { value: '4', text: 'ëˆ„êµ¬ ì˜ëª»ì¸ì§€ ì›ì¸ë¶€í„° ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ì„', tag: '#ë¬¸ì œí•´ê²°í˜•'} ] },
            { id: 'q27', type: 'dynamic', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'íŒŒíŠ¸ë„ˆê°€ ì²­ì†Œë¥¼ í–ˆëŠ”ë° êµ¬ì„ì— ë¨¼ì§€ê°€ ë‚¨ì•˜ë‹¤ë©´?', options: [ { value: '1', text: 'í•´ì¤€ ê²Œ ì–´ë””ì•¼, ê³ ë§ˆì›Œí•˜ë©° ë„˜ì–´ê°„ë‹¤', tag: '#ê¸ì •ì ê°•í™”', followup: { text: 'ê³„ì† ë°˜ë³µëœë‹¤ë©´?', options: [{ value: '1', text: 'ì•Œì•„ì„œ ê³ ì³ì£¼ê¸¸ ë°”ë€ë‹¤' }, { value: '2', text: 'ì¢‹ê²Œ ë§í•´ì„œ ê³ ì¹œë‹¤' }, { value: '3', text: 'ê·¸ëƒ¥ ë‚´ê°€ í•œë‹¤' }] } }, { value: '2', text: 'ë‹¤ìŒì—” ì—¬ê¸°ë„ ë‹¦ì•„ë‹¬ë¼ê³  í”¼ë“œë°±í•œë‹¤', tag: '#í”¼ë“œë°±ì œê³µ', followup: { text: 'ê·¸ë˜ë„ ì•ˆ ê³ ì³ì§€ë©´?', options: [{ value: '1', text: 'ì§„ì§€í•˜ê²Œ ëŒ€í™”í•œë‹¤' }, { value: '2', text: 'í¬ê¸°í•˜ê³  ë‚´ê°€ í•œë‹¤' }, { value: '3', text: 'ê³„ì† ì”ì†Œë¦¬í•œë‹¤' }] } }, { value: '3', text: 'ë§ì—†ì´ ë‚´ê°€ ì¡°ìš©íˆ ì¹˜ìš´ë‹¤', tag: '#ê°ˆë“±íšŒí”¼í˜•', followup: { text: 'ë¶ˆë§Œì´ ìŒ“ì¸ë‹¤ë©´?', options: [{ value: '1', text: 'ëˆˆì¹˜ë¥¼ ì¤€ë‹¤' }, { value: '2', text: 'í•œë²ˆì— í­ë°œí•œë‹¤' }, { value: '3', text: 'í•´íƒˆí•œë‹¤' }] } }, { value: '4', text: 'ë¨¼ì§€ ì¢€ ìˆìœ¼ë©´ ì–´ë•Œ, ì‹ ê²½ ì•ˆ ì“´ë‹¤', tag: '#YOLO', followup: { text: 'ìƒëŒ€ê°€ ì‹«ì–´í•˜ë©´?', options: [{ value: '1', text: 'ë§ì¶°ì£¼ë ¤ ë…¸ë ¥í•œë‹¤' }, { value: '2', text: 'ìƒëŒ€ê°€ ì´í•´í•´ì£¼ê¸¸ ë°”ë€ë‹¤' }, { value: '3', text: 'ë„ìš°ë¯¸ë¥¼ ë¶€ë¥¸ë‹¤' }] } } ] },
            { id: 'q24', type: 'crossover', brainType: 'Thinking (ê°€ì¹˜ê´€)', text_me: 'ê²°í˜¼ í›„ ì ì ˆí•œ ë³¸ê°€ ë°©ë¬¸ ë¹ˆë„ëŠ”?', text_partner: 'íŒŒíŠ¸ë„ˆê°€ ì›í–ˆìœ¼ë©´ í•˜ëŠ” ë°©ë¬¸ ë¹ˆë„ëŠ”?', options: [ { value: '1', text: 'ëª…ì ˆì´ë‚˜ ìƒì‹  ë“± íŠ¹ë³„í•œ ë‚ ì—ë§Œ', tag: '#ë…ë¦½ì„±ì¤‘ì‹œ'}, { value: '2', text: 'í•œë‘ ë‹¬ì— í•œ ë²ˆ ì •ë„ ì •ê¸°ì ìœ¼ë¡œ', tag: '#ê°€ì¡±ì¤‘ì‹¬í˜•'}, { value: '3', text: 'ì •í•´ë‘ì§€ ì•Šê³  í•„ìš”í•  ë•Œ ììœ ë¡­ê²Œ', tag: '#ììœ ì¶”êµ¬í˜•'}, { value: '4', text: 'ê°€ê¹Œì´ ì‚´ë©´ì„œ ìì£¼ ì™•ë˜í•˜ë©° ê°€ê¹ê²Œ', tag: '#ê´€ê³„ì¤‘ì‹¬í˜•'} ] },
            { id: 'q25', type: 'dynamic', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ê°€ì‚¬ ë¶„ë‹´ì— ëŒ€í•œ ì†”ì§í•œ ìƒê°ì€?', options: [ { value: '1', text: 'ê°ì ì˜í•˜ëŠ” ê±¸ ì •í•´ ì¹¼ê°™ì´ ë‚˜ëˆˆë‹¤', tag: '#íš¨ìœ¨ì¤‘ì‹œí˜•', followup: { text: 'ê·œì¹™ì´ ì•ˆ ì§€ì¼œì§€ë©´?', options: [{ value: '1', text: 'ì¬í˜‘ìƒí•œë‹¤' }, { value: '2', text: 'ë‹µë‹µí•´ì„œ ë‚´ê°€ í•œë‹¤' }, { value: '3', text: 'ê·¸ëƒ¥ ë‘”ë‹¤' }]}}, { value: '2', text: 'ê·¸ë•Œê·¸ë•Œ ì‹œê°„ ë˜ëŠ” ì‚¬ëŒì´ í•œë‹¤', tag: '#ììœ¨í˜•', followup: { text: 'ë‚˜ë§Œ ë…ë°• ì“´ë‹¤ë©´?', options: [{ value: '1', text: 'í™”ë‚¸ë‹¤' }, { value: '2', text: 'ëˆˆì¹˜ ì¤€ë‹¤' }, { value: '3', text: 'ë‚´ê°€ ë” ì˜í•˜ë‹ˆê¹Œ í•œë‹¤' }]}}, { value: '3', text: 'ì£¼ë§ì— ë‚  ì¡ê³  í•¨ê»˜ ëª°ì•„ì„œ í•œë‹¤', tag: '#ê³„íší˜•', followup: { text: 'ì£¼ë§ ì•½ì†ì´ ìƒê¸°ë©´?', options: [{ value: '1', text: 'ì²­ì†Œê°€ ìš°ì„ ì´ë‹¤' }, { value: '2', text: 'ì•½ì†ì„ ì¡´ì¤‘í•œë‹¤' }, { value: '3', text: 'í‰ì¼ì— ë‚˜ëˆ ì„œ í•œë‹¤' }]}}, { value: '4', text: 'í¸ë¦¬í•œ ê°€ì „ì´ë‚˜ ë„ìš°ë¯¸ë¥¼ ì“´ë‹¤', tag: '#í¸ë¦¬ì„±ì¶”êµ¬', followup: { text: 'ë¹„ìš©ì´ ë¶€ë‹´ë˜ë©´?', options: [{ value: '1', text: 'ê·¸ë˜ë„ í¸ë¦¬í•¨ì´ ìš°ì„ ' }, { value: '2', text: 'ë¹„ìš©ì„ ì¤„ì¸ë‹¤' }, { value: '3', text: 'ì§ì ‘ ëª¸ìœ¼ë¡œ í•œë‹¤' }]}} ] },
            { id: 'q12', type: 'similarity', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ì´ìƒì ì¸ ìë…€ ê³„íšì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?', options: [ { value: '1', text: 'ë”©í¬ì¡± (ìë…€ ì—†ì´ ë‘˜ë§Œ)', tag: '#ê°œì¸ì£¼ì˜í˜•'}, { value: '2', text: 'í•œ ëª…ì—ê²Œ ì§‘ì¤‘í•´ì„œ ì˜ í‚¤ìš°ê¸°', tag: '#ê³„íší˜•'}, { value: '3', text: 'ë‘ ëª… ì´ìƒ, í˜•ì œìë§¤ê°€ ìˆëŠ” ê²Œ ì¢‹ë‹¤', tag: '#ê°€ì •ì¤‘ì‹¬í˜•'}, { value: '4', text: 'ë‹¤ë‘¥ì´ ê°€ì¡±ìœ¼ë¡œ ë¶ì ë¶ì í•˜ê²Œ', tag: '#ë‹¤ìë…€ì„ í˜¸'} ] },
            { id: 'q13', type: 'crossover', brainType: 'Thinking (ê°€ì¹˜ê´€)', text_me: 'ì„ í˜¸í•˜ëŠ” ê²½ì œ í™œë™ í˜•íƒœëŠ”?', text_partner: 'íŒŒíŠ¸ë„ˆì—ê²Œ ë°”ë¼ëŠ” ê²½ì œ í™œë™ì€?', options: [ { value: '1', text: 'ê°ì ì»¤ë¦¬ì–´ë¥¼ ìœ„í•œ ë§ë²Œì´', tag: '#ì„±ì¥ì§€í–¥í˜•'}, { value: '2', text: 'ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ì¡°ì •', tag: '#ìƒí™©ì ì‘í˜•'}, { value: '3', text: 'í•œ ëª…ì€ ê²½ì œí™œë™, í•œ ëª…ì€ ê°€ì‚¬ ì „ë‹´', tag: '#ì „í†µì ê°€ì¹˜ê´€'}, { value: '4', text: 'ë¹ ë¥¸ ì€í‡´ í›„ ê²½ì œì  ììœ  (íŒŒì´ì–´ì¡±)', tag: '#ììœ ì¶”êµ¬í˜•'} ] },
            { id: 'q15', type: 'similarity', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ë‚˜ì—ê²Œ ê²°í˜¼ì˜ ê°€ì¥ í° ì˜ë¯¸ëŠ”?', options: [ { value: '1', text: 'ë‚´ í¸ì´ ìƒê¸°ëŠ” ì •ì„œì  ì•ˆì •ê°', tag: '#ì•ˆì •ì§€í–¥í˜•'}, { value: '2', text: 'ì‚¬ë‘ì˜ ê²°ì‹¤ì´ì ê°€ì •ì˜ ì™„ì„±', tag: '#ê°€ì •ì¤‘ì‹¬í˜•'}, { value: '3', text: 'ì„œë¡œ ë” ë‚˜ì€ ì‚¬ëŒì´ ë˜ëŠ” ì„±ì¥', tag: '#ì„±ì¥ì§€í–¥í˜•'}, { value: '4', text: 'í‰ìƒ í•¨ê»˜ ë†€ ì¦ê±°ìš´ ì¸ìƒ ì¹œêµ¬', tag: '#ëª¨í—˜ì¶”êµ¬í˜•'} ] },
            { id: 'q16', type: 'dynamic', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ì‹ í˜¼ì§‘ ì„ íƒ ì‹œ ìµœìš°ì„  ì¡°ê±´ì€?', options: [ { value: '1', text: 'ë¯¸ë˜ ê°€ì¹˜ê°€ ë†’ì€ ì„œìš¸/ì¤‘ì‹¬ì§€', tag: '#ë¯¸ë˜ê°€ì¹˜ì¤‘ì‹œ', followup: { text: 'ì§‘ì´ ë„ˆë¬´ ì¢ë‹¤ë©´?', options: [{ value: '1', text: 'ë¯¸ë˜ë¥¼ ìœ„í•´ ì°¸ëŠ”ë‹¤' }, { value: '2', text: 'ê³ ë¯¼ëœë‹¤' }, { value: '3', text: 'ì¢ì€ ê±´ ì‹«ë‹¤' }]}}, { value: '2', text: 'ì¾Œì í•˜ê³  ë„“ì€ ì‹ ë„ì‹œ ì‹ ì¶•', tag: '#í˜„ì¬ì•ˆì •ì¤‘ì‹œ', followup: { text: 'ì¶œí‡´ê·¼ì´ ë„ˆë¬´ ë©€ë©´?', options: [{ value: '1', text: 'ê°ìˆ˜í•œë‹¤' }, { value: '2', text: 'ë„ˆë¬´ í˜ë“¤ ê²ƒ ê°™ë‹¤' }, { value: '3', text: 'ì´ì‚¬ ê³ ë ¤í•œë‹¤' }]}}, { value: '3', text: 'íšŒì‚¬ê°€ ê°€ê¹Œìš´ ì§ì£¼ê·¼ì ‘', tag: '#ì‹¤ìš©ì£¼ì˜í˜•', followup: { text: 'ì§‘ì´ ë„ˆë¬´ ë‚¡ì•˜ë‹¤ë©´?', options: [{ value: '1', text: 'ìˆ˜ë¦¬í•´ì„œ ì‚°ë‹¤' }, { value: '2', text: 'ê³ ë¯¼ëœë‹¤' }, { value: '3', text: 'ë‚¡ì€ ì§‘ì€ ì‹«ë‹¤' }]}}, { value: '4', text: 'ë‚´ ì·¨í–¥ì´ ë‹´ê¸´ ì˜ˆìœ ì¸í…Œë¦¬ì–´', tag: '#ì‹¬ë¯¸ì£¼ì˜í˜•', followup: { text: 'ì˜ˆì‚°ì´ ì´ˆê³¼ëœë‹¤ë©´?', options: [{ value: '1', text: 'ë¬´ë¦¬í•´ì„œë¼ë„ í•œë‹¤' }, { value: '2', text: 'ì ë‹¹íˆ íƒ€í˜‘í•œë‹¤' }, { value: '3', text: 'í¬ê¸°í•œë‹¤' }]}} ] }
        ];

        const tagGroups = {
            EMOTIONAL_CONNECT: { tags: ['#ë‚­ë§Œì£¼ì˜í˜•', '#ê´€ê³„ì¤‘ì‹¬í˜•', '#ì„¸ì‹¬í•¨ì¤‘ì‹œ', '#ìŠ¤í‚¨ì‹­ì¤‘ì‹œ', '#ì •ì„œì ì§€ì§€', '#ë°°ë ¤í˜•', '#ê°ì •í‘œí˜„í˜•', '#ê¸ì •ì ê°•í™”', '#ê°€ì¡±ì¤‘ì‹¬í˜•', '#ë‹¤ìë…€ì„ í˜¸', '#ì‹œê°„ê³µìœ í˜•'] },
            PRACTICAL_RATIONAL: { tags: ['#ì‹¤ìš©ì£¼ì˜í˜•', '#ì›ì¹™ì£¼ì˜í˜•', '#í˜„ì‹¤ì£¼ì˜í˜•', '#ë…¼ë¦¬ì ëŒ€í™”', '#ë¬¸ì œí•´ê²°í˜•', '#íš¨ìœ¨ì¤‘ì‹œí˜•', '#í”¼ë“œë°±ì œê³µ', '#ë¯¸ë˜ê°€ì¹˜ì¤‘ì‹œ', '#í˜„ì¬ì•ˆì •ì¤‘ì‹œ'] }, 
            STABILITY_ORIENTED: { tags: ['#ì•ˆì •ì§€í–¥í˜•', '#ì•ˆì •ì íˆ¬ì', '#ê³„íší˜•', '#ì§‘ìˆœì´/ì§‘ëŒì´', '#ë³´ìˆ˜ì ê°€ì¹˜ê´€', '#ì „í†µì ê°€ì¹˜ê´€', '#ì •ì ì¸'] },
            ACTIVE_EXPERIENCE: { tags: ['#ê²½í—˜ì¤‘ì‹œí˜•', '#ì„±ì·¨ì§€í–¥í˜•', '#ì‚¬êµí˜•', '#í™œë™ì ì¸', '#ëª¨í—˜ì¶”êµ¬í˜•', '#ì´ë²¤íŠ¸ì„ í˜¸', '#ê³¼ê°í•œíˆ¬ì', '#ê³µê²©ì íˆ¬ì', '#ìê¸°ê³„ë°œí˜•', '#ì„±ì¥ì§€í–¥í˜•'] },
            AUTONOMY_FLEXIBILITY: { tags: ['#ê°œì¸ì£¼ì˜í˜•', '#ì¿¨í•œì—°ì• ', '#ììœ ë¡œìš´í‘œí˜„', '#ì‚¬ìƒí™œì¤‘ì‹œ', '#ììœ ì¶”êµ¬í˜•', '#ë…ë¦½ì„±ì¤‘ì‹œ', '#ììœ¨í˜•', '#ê°ˆë“±íšŒí”¼í˜•', '#ììœ ë¡œìš´', '#YOLO'] }, 
            ADAPTIVE_BALANCED: { tags: ['#ìƒí™©ì ì‘í˜•', '#ê°ì •ì¡°ì ˆí˜•', '#í¸ë¦¬ì„±ì¶”êµ¬', '#ì‹¬ë¯¸ì£¼ì˜í˜•', '#ì°¨ë¶„í•œ'] }
        };
        
        const sensoryProfiles = {
            EMOTIONAL_CONNECT: { name: "ê°ì„±ì˜ ê²°", description: "ë§ˆìŒì˜ ì˜¨ê¸°ì™€ ì •ì„œì  êµë¥˜ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤.", colorCode: "#F9A8D4" },
            PRACTICAL_RATIONAL: { name: "ì´ì„±ì˜ ê²°", description: "íš¨ìœ¨ê³¼ ë…¼ë¦¬ë¥¼ ì¤‘ì‹œí•˜ë©° ëª…í™•í•œ í•´ê²°ì±…ì„ ì°¾ìŠµë‹ˆë‹¤.", colorCode: "#3B82F6" },
            STABILITY_ORIENTED: { name: "ì•ˆì •ì˜ ê²°", description: "ë³€í•¨ì—†ëŠ” ì‹ ë¢°ì™€ ì˜ˆì¸¡ ê°€ëŠ¥í•œ í‰ì˜¨í•¨ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.", colorCode: "#22C55E" },
            ACTIVE_EXPERIENCE: { name: "í™œë™ì˜ ê²°", description: "ìƒˆë¡œìš´ ë„ì „ê³¼ ê²½í—˜ì„ í†µí•´ ì‚¶ì˜ ì—ë„ˆì§€ë¥¼ ì–»ìŠµë‹ˆë‹¤.", colorCode: "#F59E0B" },
            AUTONOMY_FLEXIBILITY: { name: "ììœ ì˜ ê²°", description: "ì–½ë§¤ì´ì§€ ì•ŠëŠ” ììœ ì™€ ì„œë¡œì˜ ë…ë¦½ì„±ì„ ì¡´ì¤‘í•©ë‹ˆë‹¤.", colorCode: "#8B5CF6" },
            ADAPTIVE_BALANCED: { name: "ì¡°í™”ì˜ ê²°", description: "ì–´ë–¤ ìƒí™©ì—ì„œë„ ìœ ì—°í•˜ê²Œ ì ì‘í•˜ë©° ê· í˜•ì„ ë§ì¶¥ë‹ˆë‹¤.", colorCode: "#6B7280" }
        };

        const tarotMap = {
            EMOTIONAL_CONNECT: { name: "The Lovers", img: "https://upload.wikimedia.org/wikipedia/ko/d/db/RWS_Tarot_06_Lovers.jpg" },
            PRACTICAL_RATIONAL: { name: "Justice", img: "https://upload.wikimedia.org/wikipedia/ko/e/e0/RWS_Tarot_11_Justice.jpg" },
            STABILITY_ORIENTED: { name: "The Hierophant", img: "https://upload.wikimedia.org/wikipedia/ko/8/8d/RWS_Tarot_05_Hierophant.jpg" },
            ACTIVE_EXPERIENCE: { name: "The Chariot", img: "https://upload.wikimedia.org/wikipedia/ko/9/9b/RWS_Tarot_07_Chariot.jpg" },
            AUTONOMY_FLEXIBILITY: { name: "The Fool", img: "https://upload.wikimedia.org/wikipedia/ko/9/90/RWS_Tarot_00_Fool.jpg" },
            ADAPTIVE_BALANCED: { name: "Temperance", img: "https://upload.wikimedia.org/wikipedia/ko/f/f8/RWS_Tarot_14_Temperance.jpg" }
        };

        const tarotReadings = {
            'EMOTIONAL_CONNECT_EMOTIONAL_CONNECT': "ë‘ ë¶„ì€ 'ì—°ì¸' ì¹´ë“œì²˜ëŸ¼ ì„œë¡œì˜ ë§ˆìŒì„ ê±°ìš¸ì²˜ëŸ¼ ë¹„ì¶”ëŠ” ê´€ê³„ì…ë‹ˆë‹¤. ë§í•˜ì§€ ì•Šì•„ë„ í†µí•˜ëŠ” ê¹Šì€ ìœ ëŒ€ê°ì„ ê°€ì¡Œì§€ë§Œ, ë•Œë¡œëŠ” ê°ì •ì— íœ©ì“¸ë ¤ í˜„ì‹¤ì ì¸ ë¬¸ì œë¥¼ ë†“ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•˜ì„¸ìš”.",
            'PRACTICAL_RATIONAL_PRACTICAL_RATIONAL': "ë‘ ë¶„ì€ 'ì •ì˜' ì¹´ë“œì²˜ëŸ¼ ê³µì •í•˜ê³  ëª…í™•í•œ ê´€ê³„ì…ë‹ˆë‹¤. ì˜¤í•´ ì—†ëŠ” ê¹”ë”í•œ ì†Œí†µì´ ê°•ì ì´ì§€ë§Œ, ë„ˆë¬´ ì˜³ê³  ê·¸ë¦„ì„ ë”°ì§€ë‹¤ ë³´ë©´ ì •ì„œì ì¸ êµê°ì´ ë©”ë§ë¼ë²„ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            'STABILITY_ORIENTED_STABILITY_ORIENTED': "ë‘ ë¶„ì€ 'êµí™©' ì¹´ë“œì²˜ëŸ¼ ì‹ ë¢°ì™€ ì „í†µì„ ì¤‘ì‹œí•©ë‹ˆë‹¤. í”ë“¤ë¦¼ ì—†ëŠ” í¸ì•ˆí•¨ì´ í° ì¥ì ì´ì§€ë§Œ, ê´€ê³„ê°€ ë„ˆë¬´ ë‹¨ì¡°ë¡œì›Œì§€ì§€ ì•Šë„ë¡ ê°€ë”ì€ ìƒˆë¡œìš´ ë°ì´íŠ¸ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.",
            'ACTIVE_EXPERIENCE_ACTIVE_EXPERIENCE': "ë‘ ë¶„ì€ 'ì „ì°¨' ì¹´ë“œì²˜ëŸ¼ í•¨ê»˜ ëª©í‘œë¥¼ í–¥í•´ ëŒì§„í•˜ëŠ” íŒŒì›Œ ì»¤í”Œì…ë‹ˆë‹¤. ì—ë„ˆì§€ê°€ ë„˜ì¹˜ì§€ë§Œ, ë‘˜ ë‹¤ ë¦¬ë“œí•˜ë ¤ë‹¤ ì¶©ëŒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ì„œë¡œ ì–‘ë³´í•˜ëŠ” ì§€í˜œê°€ í•„ìš”í•©ë‹ˆë‹¤.",
            'AUTONOMY_FLEXIBILITY_AUTONOMY_FLEXIBILITY': "ë‘ ë¶„ì€ 'ê´‘ëŒ€' ì¹´ë“œì²˜ëŸ¼ ììœ ë¡œìš´ ì˜í˜¼ì˜ ë§Œë‚¨ì…ë‹ˆë‹¤. ì„œë¡œì˜ ì‚¬ìƒí™œì„ ì™„ë²½íˆ ì¡´ì¤‘í•˜ì§€ë§Œ, ìì¹«í•˜ë©´ ê´€ê³„ì˜ ëˆì´ ëŠìŠ¨í•´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ 'ìš°ë¦¬'ë¼ëŠ” ê³µë™ì˜ ë¯¸ë˜ë¥¼ ìì£¼ ê·¸ë ¤ë³´ì„¸ìš”.",
            'ADAPTIVE_BALANCED_ADAPTIVE_BALANCED': "ë‘ ë¶„ì€ 'ì ˆì œ' ì¹´ë“œì²˜ëŸ¼ ë¬¼ íë¥´ë“¯ í‰í™”ë¡œìš´ ê´€ê³„ì…ë‹ˆë‹¤. ì‹¸ì›€ì´ ê±°ì˜ ì—†ì§€ë§Œ, ê°ˆë“±ì„ í”¼í•˜ë ¤ë‹¤ ì†ë§ˆìŒì„ ìˆ¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ë”ì€ ì†”ì§í•œ ë¶ˆë§Œë„ í„¸ì–´ë†“ìœ¼ì„¸ìš”.",
            'DEFAULT': "ì„œë¡œ ë‹¤ë¥¸ ë§¤ë ¥ì„ ê°€ì§„ ë‘ ë¶„ì´ ë§Œë‚¬ìŠµë‹ˆë‹¤. ì„œë¡œì˜ ì°¨ì´ë¥¼ 'í‹€ë¦¼'ì´ ì•„ë‹Œ 'ë‹¤ë¦„'ìœ¼ë¡œ ë°›ì•„ë“¤ì¼ ë•Œ, ì´ ê´€ê³„ëŠ” ì„œë¡œì˜ ì„¸ê³„ë¥¼ ë„“í˜€ì£¼ëŠ” ê°€ì¥ í›Œë¥­í•œ ì—¬í–‰ì´ ë  ê²ƒì…ë‹ˆë‹¤."
        };

        const maleContainer = document.getElementById('male-questions');
        const femaleContainer = document.getElementById('female-questions');
        let totalQuestions = 0;

        function createQuestionHTML(q, gender) {
            const isMale = gender === 'male';
            
            let badge = '';
            if (q.type === 'similarity') badge = `<span class="text-[10px] font-bold tracking-wider text-gray-400 uppercase border border-gray-200 px-2 py-0.5 rounded-full">ìœ ì‚¬ì„±</span>`;
            else if (q.type === 'crossover') badge = `<span class="text-[10px] font-bold tracking-wider text-purple-500 uppercase border border-purple-100 bg-purple-50 px-2 py-0.5 rounded-full">ì„ í˜¸ë„</span>`;
            else if (q.type === 'dynamic') badge = `<span class="text-[10px] font-bold tracking-wider text-amber-500 uppercase border border-amber-100 bg-amber-50 px-2 py-0.5 rounded-full">ì‹¬í™”</span>`;

            const optionsHTML = q.options.map((opt, idx) => {
                const onChange = q.type === 'dynamic' ? 
                    `onchange="handleDynamic(this, '${q.id}', '${gender}', '${encodeURIComponent(JSON.stringify(opt.followup))}')"` : '';
                
                return `
                <div class="relative">
                    <input type="radio" name="${q.id}-me-${gender}" value="${opt.value}" data-tag="${opt.tag}" data-text="${opt.text}"
                           id="${q.id}-me-${gender}-${idx}" class="hidden-radio peer" ${onChange}>
                    <label for="${q.id}-me-${gender}-${idx}" 
                           class="option-label block w-full p-4 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-all text-sm text-gray-600 peer-checked:bg-${isMale?'blue':'pink'}-50 peer-checked:border-${isMale?'blue':'pink'}-300 peer-checked:text-${isMale?'blue':'pink'}-700">
                        ${opt.text}
                    </label>
                </div>`;
            }).join('');

            let partnerSection = '';
            if (q.type === 'crossover') {
                const partnerOptions = q.options.map((opt, idx) => `
                    <div class="relative">
                        <input type="radio" name="${q.id}-partner-${gender}" value="${opt.value}" data-tag="${opt.tag}" data-text="${opt.text}"
                               id="${q.id}-partner-${gender}-${idx}" class="hidden-radio peer">
                        <label for="${q.id}-partner-${gender}-${idx}" 
                               class="option-label block w-full p-3 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-all text-xs text-gray-500 peer-checked:bg-purple-50 peer-checked:border-purple-300 peer-checked:text-purple-700">
                            ${opt.text}
                        </label>
                    </div>`).join('');
                
                partnerSection = `
                <div class="mt-4 pt-4 border-t border-dashed border-gray-200">
                    <p class="text-xs font-bold text-gray-500 mb-2">Q. ${q.text_partner}</p>
                    <div class="grid grid-cols-1 gap-2">${partnerOptions}</div>
                </div>`;
            }

            return `
            <div class="question-card p-6 rounded-2xl mb-6">
                <div class="flex justify-between items-center mb-3">
                    <span class="text-xs font-medium text-gray-400">${q.brainType}</span>
                    ${badge}
                </div>
                <h3 class="font-bold text-gray-800 mb-4 text-base leading-snug break-keep">
                    ${q.type === 'crossover' ? q.text_me : q.text}
                </h3>
                <div class="space-y-2 grid grid-cols-1 gap-1">
                    ${optionsHTML}
                </div>
                ${partnerSection}
            </div>`;
        }

        function handleDynamic(radio, qId, gender, dataStr) {
            const data = JSON.parse(decodeURIComponent(dataStr));
            const card = radio.closest('.question-card');
            const existing = card.querySelector('.dynamic-area');
            if (existing) existing.remove();

            const div = document.createElement('div');
            div.className = 'dynamic-area mt-4 pt-4 border-t border-amber-100 bg-amber-50/50 -mx-6 px-6 pb-4 animate-fade-in-up';
            div.innerHTML = `
                <p class="text-xs font-bold text-amber-600 mb-2">â†³ ${data.text}</p>
                <div class="grid grid-cols-1 gap-2">
                    ${data.options.map((opt, i) => `
                        <div>
                            <input type="radio" name="${qId}-followup-${gender}" value="${opt.value}" id="${qId}-fu-${gender}-${i}" class="hidden-radio peer" data-score="${opt.value==='1'?6:opt.value==='2'?5:4}" data-text="${opt.text}">
                            <label for="${qId}-fu-${gender}-${i}" class="option-label block w-full p-3 bg-white rounded-xl border border-amber-200 text-xs text-gray-600 cursor-pointer hover:bg-white/80 peer-checked:bg-amber-100 peer-checked:text-amber-800 peer-checked:font-bold peer-checked:border-amber-400">${opt.text}</label>
                        </div>
                    `).join('')}
                </div>
            `;
            card.appendChild(div);
        }

        function renderQuestions() {
            let maleHTML = '', femaleHTML = '';
            questions.forEach(q => {
                maleHTML += createQuestionHTML(q, 'male');
                femaleHTML += createQuestionHTML(q, 'female');
                totalQuestions++; 
            });
            maleContainer.innerHTML = maleHTML;
            femaleContainer.innerHTML = femaleHTML;
        }

        function getGroup(tag) {
            for(const [key, val] of Object.entries(tagGroups)) {
                if(val.tags.includes(tag)) return key;
            }
            return null;
        }

        function generateAnalysisText(score, mDom, fDom) {
            let title = "", text = "";
            
            if(score >= 85) {
                title = "ì˜í˜¼ê¹Œì§€ ë‹®ì€ ë°ì¹¼ì½”ë§ˆë‹ˆ";
                text = `
                    <p class="mb-2 font-bold text-indigo-700">"ë§í•˜ì§€ ì•Šì•„ë„ í†µí•˜ëŠ” ì²œìƒì—°ë¶„"</p>
                    <p class="mb-4">ë‘ ë¶„ì€ ë†€ë¼ìš¸ ì •ë„ë¡œ ë¹„ìŠ·í•œ 'ê²°'ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì„¸ìƒì„ ë°”ë¼ë³´ëŠ” ê°€ì¹˜ê´€, ê°ì •ì„ í‘œí˜„í•˜ëŠ” ë°©ì‹, ì‹¬ì§€ì–´ ì£¼ë§ì„ ë³´ë‚´ëŠ” ì‚¬ì†Œí•œ ìŠµê´€ê¹Œì§€ ë‹®ì•„ìˆë„¤ìš”. ë§ˆì¹˜ ì˜¤ë˜ëœ ê±°ìš¸ì„ ë³´ëŠ” ê²ƒì²˜ëŸ¼ ì„œë¡œì—ê²Œì„œ ìì‹ ì˜ ëª¨ìŠµì„ ë°œê²¬í•˜ë©° ê¹Šì€ í¸ì•ˆí•¨ì„ ëŠë‚„ ê²ƒì…ë‹ˆë‹¤.</p>
                    <p class="text-sm bg-indigo-50 p-3 rounded-lg">ğŸ’¡ <b>Tip:</b> ë„ˆë¬´ ë¹„ìŠ·í•´ì„œ ê¶Œíƒœë¡œì›€ì„ ëŠë‚„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê°€ë”ì€ ì˜ë„ì ìœ¼ë¡œ ì„œë¡œ ë‹¤ë¥¸ ì·¨ë¯¸ë¥¼ ê³µìœ í•˜ë©° ì‹ ì„ í•œ ìê·¹ì„ ì£¼ëŠ” ê²ƒì´ ê´€ê³„ë¥¼ ë”ìš± ë‹¨ë‹¨í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.</p>
                `;
            } else if(score >= 70) {
                title = "ì„œë¡œì—ê²Œ ìŠ¤ë©°ë“œëŠ” ë¬¼ê°";
                text = `
                    <p class="mb-2 font-bold text-pink-600">"ë‹¤ë¦„ì´ ë§¤ë ¥ì´ ë˜ëŠ” ì¡°í™”ë¡œìš´ ê´€ê³„"</p>
                    <p class="mb-4">ë‘ ë¶„ì€ ì„œë¡œ ë‹¤ë¥¸ ìƒ‰ì„ ê°€ì¡Œì§€ë§Œ, ì„ì´ë©´ ë” ì•„ë¦„ë‹¤ìš´ ìƒ‰ì´ ë˜ëŠ” ë¬¼ê° ê°™ìŠµë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ì‹ ë¢°ì™€ ê°€ì¹˜ê´€ì€ ê³µìœ í•˜ë©´ì„œë„, ê°ìì˜ ê°œì„±ì´ ëšœë ·í•´ ì„œë¡œì—ê²Œ ëŠì„ì—†ì´ ì˜ê°ì„ ì¤ë‹ˆë‹¤. ë‚¨ìì˜ ë¶€ì¡±í•œ ì ì„ ì—¬ìê°€ ì±„ì›Œì£¼ê³ , ì—¬ìì˜ ë¹ˆí‹ˆì„ ë‚¨ìê°€ ê°ì‹¸ì£¼ëŠ” 'ìƒí˜¸ë³´ì™„ì 'ì¸ ê´€ê³„ì˜ ì •ì„ì…ë‹ˆë‹¤.</p>
                    <p class="text-sm bg-pink-50 p-3 rounded-lg">ğŸ’¡ <b>Tip:</b> ì„œë¡œì˜ ë‹¤ë¦„ì„ 'í‹€ë¦¼'ìœ¼ë¡œ ì˜¤í•´í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”. ì§€ê¸ˆì²˜ëŸ¼ ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¸ì •í•˜ê³  ë°°ë ¤í•œë‹¤ë©´ ê°€ì¥ ì´ìƒì ì¸ ì»¤í”Œì´ ë  ê²ƒì…ë‹ˆë‹¤.</p>
                `;
            } else if(score >= 50) {
                title = "ë§ì¶°ê°€ëŠ” í¼ì¦ ì¡°ê°";
                text = `
                    <p class="mb-2 font-bold text-green-600">"ë…¸ë ¥í• ìˆ˜ë¡ ì™„ë²½í•´ì§€ëŠ” ì‚¬ì´"</p>
                    <p class="mb-4">ì•„ì§ì€ ì„œë¡œì˜ ëª¨ì„œë¦¬ê°€ ì¡°ê¸ˆ ë¾°ì¡±í•  ìˆ˜ ìˆì§€ë§Œ, ê·¸ë ‡ê¸°ì— ë”± ë§ë¬¼ë ¸ì„ ë•Œ ë” ê²¬ê³ í•œ ê²°í•©ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤. ë‘ ë¶„ì€ ì„œë¡œ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ìë¼ ë‹¤ë¥¸ 'ê²°'ì„ ê°€ì¡Œì§€ë§Œ, ì„œë¡œë¥¼ í–¥í•œ í˜¸ê¸°ì‹¬ê³¼ ì´í•´í•˜ë ¤ëŠ” ë§ˆìŒì´ í½ë‹ˆë‹¤. ì§€ê¸ˆ ê²ªëŠ” ì‘ì€ ë§ˆì°°ë“¤ì€ ì„œë¡œì—ê²Œ ê¼­ ë§ëŠ” ëª¨ì–‘ì´ ë˜ì–´ê°€ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.</p>
                    <p class="text-sm bg-green-50 p-3 rounded-lg">ğŸ’¡ <b>Tip:</b> 'ì™œ ë‚˜ë‘ ë‹¤ë¥´ì§€?'ë¼ê³  ìƒê°í•˜ê¸°ë³´ë‹¤ 'ì´ëŸ° ì ì€ ë°°ìš¸ ìˆ˜ ìˆê² êµ¬ë‚˜'ë¼ê³  ìƒê°í•´ë³´ì„¸ìš”. ëŒ€í™”ì˜ ì‹œê°„ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ë§¤ì¹­ ì ìˆ˜ëŠ” ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì˜¬ë¼ê°ˆ ê²ƒì…ë‹ˆë‹¤.</p>
                `;
            } else {
                title = "ìì„ ê°™ì€ Nê·¹ê³¼ Sê·¹";
                text = `
                    <p class="mb-2 font-bold text-amber-600">"ì„œë¡œ ì •ë°˜ëŒ€ë¼ ë” ê°•ë ¬í•˜ê²Œ ëŒë¦¬ëŠ” ë§¤ë ¥"</p>
                    <p class="mb-4">ë‘ ë¶„ì€ ë§ˆì¹˜ Nê·¹ê³¼ Sê·¹ì²˜ëŸ¼ ì •ë°˜ëŒ€ì˜ ì„±í–¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì²˜ìŒì—” ê°•ë ¬í•˜ê²Œ ëŒë ¸ì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤. ë‚´ê°€ ê°€ì§€ì§€ ëª»í•œ ëª¨ìŠµì„ ìƒëŒ€ë°©ì—ê²Œì„œ ë°œê²¬í•˜ë©° ê²½ì´ë¡œì›€ì„ ëŠë¼ì§€ë§Œ, ë™ì‹œì— ì´í•´í•  ìˆ˜ ì—†ëŠ” ë¶€ë¶„ ë•Œë¬¸ì— ë‹µë‹µí•¨ì„ ëŠë‚„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê±±ì • ë§ˆì„¸ìš”. ì´ ì°¨ì´ê°€ ì„œë¡œì˜ ì„¸ìƒì„ ë‘ ë°°ë¡œ ë„“í˜€ì¤„ í…Œë‹ˆê¹Œìš”.</p>
                    <p class="text-sm bg-amber-50 p-3 rounded-lg">ğŸ’¡ <b>Tip:</b> ìƒëŒ€ë°©ì„ ë‚´ ë°©ì‹ëŒ€ë¡œ ë°”ê¾¸ë ¤ í•˜ì§€ ë§ˆì„¸ìš”. ê·¸ì € ìˆëŠ” ê·¸ëŒ€ë¡œ ì¸ì •í•´ì¤„ ë•Œ, ë‘ ë¶„ì€ ëˆ„êµ¬ë³´ë‹¤ ë‹¤ì±„ë¡­ê³  í¥ë¯¸ë¡œìš´ ì—°ì• ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                `;
            }
            
            let complementText = "";
            if(mDom === fDom) {
                complementText = `<br><p class="mt-4 border-t pt-4"><b>ğŸ¤ ì„œë¡œë¥¼ ì±„ì›Œì£¼ëŠ” ê²°:</b> ë‘ ë¶„ ëª¨ë‘ <b>'${sensoryProfiles[mDom].name}'</b>ì„ ê³µìœ í•˜ê³  ìˆì–´ ê°ˆë“± ìƒí™©ì—ì„œ í•´ê²° ë°©ì‹ì´ ë§¤ìš° ë¹„ìŠ·í•©ë‹ˆë‹¤. ì´ëŠ” í° ì¥ì ì´ì§€ë§Œ, ë‘˜ ë‹¤ ê°ì •ì ì¼ ë•Œ ë¸Œë ˆì´í¬ë¥¼ ê±¸ì–´ì¤„ ì‚¬ëŒì´ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ë¶„ì´ ê°ì •ì ì¼ ë•Œ ë‹¤ë¥¸ ë¶„ì´ ì´ì„±ì ì¸ ì—­í• ì„ ì˜ì‹ì ìœ¼ë¡œ ë§¡ì•„ì£¼ì„¸ìš”.</p>`;
            } else {
                complementText = `<br><p class="mt-4 border-t pt-4"><b>ğŸ¤ ì„œë¡œë¥¼ ì±„ì›Œì£¼ëŠ” ê²°:</b> <b>'${sensoryProfiles[mDom].name}'</b>ì„ ê°€ì§„ ë‚¨ìëŠ” <b>'${sensoryProfiles[fDom].name}'</b>ì„ ê°€ì§„ ì—¬ìì˜ ê²°ì •ì„ í˜„ì‹¤ì ìœ¼ë¡œ ì§€ì§€í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ëŒ€ë¡œ ì—¬ìëŠ” ë‚¨ìê°€ ë†“ì¹˜ê¸° ì‰¬ìš´ ì„¬ì„¸í•œ ê°ì •ì˜ ì˜ì—­ì„ ì±„ì›Œì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>`;
            }
            
            return { title, text: text + complementText };
        }

        function showResults(data) {
            document.getElementById('question-section').classList.add('hidden');
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            window.scrollTo(0, 0);

            const getDominant = (counts) => Object.keys(counts).length ? Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b) : 'ADAPTIVE_BALANCED';
            const mDom = getDominant(data.maleCounts);
            const fDom = getDominant(data.femaleCounts);

            const analysis = generateAnalysisText(data.total, mDom, fDom);

            document.getElementById('result-keyword').innerText = analysis.title;
            document.getElementById('couple-title').innerText = analysis.title;
            document.getElementById('result-one-liner').innerHTML = analysis.text;

            // í™•ë¥  ì„¤ëª… í…ìŠ¤íŠ¸
            const probDesc = document.getElementById('prob-desc');
            if (data.exactMatchCount === 0) {
                probDesc.innerHTML = "0ê°œì˜ ë‹µë³€ì´ ì¼ì¹˜í–ˆìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ 0ê°œë¥¼ ë§ì¶”ê¸°ë„ í˜ë“¤ë‹¤ëŠ” ì‚¬ì‹¤, ì•„ì‹œë‚˜ìš”? <b>ìš°ë¦¬ëŠ” ì„œë¡œì˜ ìƒˆë¡œìš´ ì„¸ìƒì„ ì—´ì–´ì¤„ ìš´ëª…ì…ë‹ˆë‹¤.</b>";
            } else if (data.exactMatchCount <= 5) {
                probDesc.innerHTML = `24ê°œ ì§ˆë¬¸ ì¤‘ <b>${data.exactMatchCount}ê°œ</b>ê°€ ë˜‘ê°™ì´ ì¼ì¹˜í–ˆìŠµë‹ˆë‹¤.<br>ì´ í™•ë¥ ì€ ëˆ„êµ°ê°€ë¥¼ ìš°ì—°íˆ ê¸¸ì—ì„œ ë‘ ë²ˆ ë§ˆì£¼ì¹  í™•ë¥ ê³¼ ê°™ìŠµë‹ˆë‹¤.`;
            } else if (data.exactMatchCount <= 10) {
                 probDesc.innerHTML = `24ê°œ ì§ˆë¬¸ ì¤‘ <b>${data.exactMatchCount}ê°œ</b>ë‚˜ ì¼ì¹˜í–ˆìŠµë‹ˆë‹¤!<br>ì´ ì •ë„ë©´ ì „ìƒì— í˜•ì œë‚˜ ë‚¨ë§¤ì˜€ì„ì§€ë„ ëª¨ë¥´ëŠ” <b>ë†€ë¼ìš´ ì¸ì—°</b>ì…ë‹ˆë‹¤.`;
            } else {
                 probDesc.innerHTML = `ì„¸ìƒì—! 24ê°œ ì¤‘ <b>${data.exactMatchCount}ê°œ</b>ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.<br>ë¡œë˜ ë‹¹ì²¨ë³´ë‹¤ í›¨ì”¬ ì–´ë ¤ìš´ í™•ë¥ ì„ ëš«ê³  ë§Œë‚œ, <b>ê¸°ì  ê°™ì€ ì²œìƒì—°ë¶„</b>ì…ë‹ˆë‹¤.`;
            }

            const scoreCircle = document.getElementById('score-ring-circle');
            const matchText = document.getElementById('match-probability-text');
            
            let rarityScore = 0;
            if (data.exactMatchCount > 0) {
                // 12ê°œë§Œ ë§ì•„ë„ ì‹œê°ì ìœ¼ë¡œ ê½‰ ì°¨ ë³´ì´ê²Œ (ê¸°ì ì ì¸ í™•ë¥ ì´ë¯€ë¡œ)
                rarityScore = (data.exactMatchCount / 12) * 100;
                rarityScore = Math.min(100, rarityScore); 
            }

            const circumference = 502;
            const offset = circumference - (rarityScore / 100) * circumference;
            
            setTimeout(() => {
                scoreCircle.style.strokeDashoffset = offset;
                matchText.innerText = data.probabilityText; 
                matchText.classList.add('text-xl'); 
            }, 300);

            document.getElementById('result-group-name-male').innerText = sensoryProfiles[mDom].name;
            document.getElementById('result-group-description-male').innerText = sensoryProfiles[mDom].description;
            document.getElementById('result-group-name-female').innerText = sensoryProfiles[fDom].name;
            document.getElementById('result-group-description-female').innerText = sensoryProfiles[fDom].description;

            drawRadar(data.maleCounts, data.femaleCounts);
            
            const renderMatchList = (list, containerId, type) => {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                if(list.length === 0) {
                    container.innerHTML = '<li class="text-gray-400 italic text-xs">í•´ë‹¹í•˜ëŠ” í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
                    return;
                }
                list.forEach(item => {
                    const li = document.createElement('li');
                    li.className = `match-item ${type} p-3 rounded-lg mb-2 border-l-4 border-l-${type === 'perfect' ? 'amber' : 'blue'}-400 bg-gray-50`;
                    
                    if(type === 'perfect') {
                        li.innerHTML = `
                            <div class="font-bold text-gray-700 mb-1 text-xs">${item.question}</div>
                            <div class="text-amber-700 bg-amber-100 inline-block px-2 py-0.5 rounded text-[10px] font-bold">
                                A. ${item.answer}
                            </div>
                        `;
                    } else {
                        li.innerHTML = `
                            <div class="font-bold text-gray-700 mb-1 text-xs">${item.question}</div>
                            <div class="flex flex-col gap-1 text-[10px]">
                                <span class="text-blue-600 font-medium">ğŸ¤µâ€â™‚ï¸ ${item.maleAnswer}</span>
                                <span class="text-pink-600 font-medium">ğŸ‘°â€â™€ï¸ ${item.femaleAnswer}</span>
                            </div>
                        `;
                    }
                    container.appendChild(li);
                });
            };
            
            renderMatchList(data.details.exactMatches, 'perfect-match-list', 'perfect');
            renderMatchList(data.details.textureMatches, 'texture-match-list', 'texture');

            const mTarot = tarotMap[mDom];
            const fTarot = tarotMap[fDom];
            
            document.getElementById('male-tarot-name').innerText = mTarot.name;
            document.getElementById('female-tarot-name').innerText = fTarot.name;
            document.getElementById('male-tarot-img').style.backgroundImage = `url(${mTarot.img})`;
            document.getElementById('female-tarot-img').style.backgroundImage = `url(${fTarot.img})`;

            const key1 = `${mDom}_${fDom}`;
            const key2 = `${fDom}_${mDom}`;
            let interpretation = tarotReadings[key1] || tarotReadings[key2] || tarotReadings['DEFAULT'];
            document.getElementById('tarot-compatibility-text').innerText = interpretation;
            
            document.getElementById('relationship-advice').innerText = "ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¸ì •í•  ë•Œ ê°€ì¥ ë¹›ë‚©ë‹ˆë‹¤. ì„œë¡œê°€ ë¬´ì—‡ì„ ì¢‹ì•„í•˜ëŠ”ì§€ ëŒ€í™”ë¥¼ í†µí•´ ë” ê¹Šì´ ì•Œì•„ê°€ë³´ì„¸ìš”.";
        }

        function drawRadar(male, female) {
            const ctx = document.getElementById('comparisonRadarChart').getContext('2d');
            const labels = Object.values(sensoryProfiles).map(p => p.name.split(' ')[0]); 
            const keys = Object.keys(sensoryProfiles);
            if(window.myRadar) window.myRadar.destroy();

            window.myRadar = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'ë‚¨ì', data: keys.map(k=>male[k]||0), borderColor: '#3B82F6', backgroundColor: 'rgba(59, 130, 246, 0.2)', pointBackgroundColor: '#3B82F6' },
                        { label: 'ì—¬ì', data: keys.map(k=>female[k]||0), borderColor: '#EC4899', backgroundColor: 'rgba(236, 72, 153, 0.2)', pointBackgroundColor: '#EC4899' }
                    ]
                },
                options: {
                    scales: { r: { suggestedMin: 0, suggestedMax: 5, pointLabels: { font: { family: "'Noto Serif KR', serif", size: 14 } } } },
                    plugins: { legend: { position: 'bottom', labels: { font: { family: "'Noto Sans KR'" } } } }
                }
            });
        }

        document.getElementById('random-btn').addEventListener('click', () => {
            document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
            const groups = {}; 
            document.querySelectorAll('input[type="radio"]').forEach(r => {
                if(!groups[r.name]) groups[r.name] = [];
                groups[r.name].push(r);
            });
            Object.values(groups).forEach(options => {
                const random = options[Math.floor(Math.random() * options.length)];
                random.checked = true;
                if(random.getAttribute('onchange')) random.dispatchEvent(new Event('change'));
            });
            setTimeout(() => {
                const dynGroups = {};
                document.querySelectorAll('.dynamic-area input[type="radio"]').forEach(r => {
                     if(!dynGroups[r.name]) dynGroups[r.name] = [];
                     dynGroups[r.name].push(r);
                });
                Object.values(dynGroups).forEach(options => {
                    const random = options[Math.floor(Math.random() * options.length)];
                    random.checked = true;
                });
            }, 100);
        });

        document.getElementById('calculate-btn').addEventListener('click', () => {
            const scores = { sim: 0, pref: 0, shape: 0 };
            const details = { exactMatches: [], textureMatches: [] };
            const maleCounts = {}, femaleCounts = {};
            
            let exactMatchCount = 0; 

            questions.forEach(q => {
                const m = document.querySelector(`input[name="${q.id}-me-male"]:checked`);
                const f = document.querySelector(`input[name="${q.id}-me-female"]:checked`);
                
                if(m && f) {
                    const mGroup = getGroup(m.dataset.tag);
                    const fGroup = getGroup(f.dataset.tag);
                    if(mGroup) maleCounts[mGroup] = (maleCounts[mGroup]||0)+1;
                    if(fGroup) femaleCounts[fGroup] = (femaleCounts[fGroup]||0)+1;
                    
                    if(q.type === 'similarity') {
                        if(m.value === f.value) { 
                            scores.sim += 4; 
                            exactMatchCount++; 
                            details.exactMatches.push({
                                question: q.text,
                                answer: m.dataset.text.trim()
                            });
                        } 
                        else if(mGroup === fGroup) { 
                            scores.sim += 3; 
                            details.textureMatches.push({
                                question: q.text,
                                maleAnswer: m.dataset.text.trim(),
                                femaleAnswer: f.dataset.text.trim()
                            });
                        }
                    }
                    
                    if(q.type === 'crossover') {
                        const mp = document.querySelector(`input[name="${q.id}-partner-male"]:checked`);
                        const fp = document.querySelector(`input[name="${q.id}-partner-female"]:checked`);
                        let prefScore = 0;
                        if(mp && mp.value === f.value) { prefScore += 8; }
                        if(fp && fp.value === m.value) { prefScore += 8; }
                        scores.pref += prefScore;
                        
                        if(mp && mp.value === f.value && fp && fp.value === m.value) {
                             exactMatchCount++; 
                             details.exactMatches.push({
                                question: q.text_me,
                                answer: `ì„œë¡œê°€ ì›í•˜ëŠ” ë°”ê°€ ì •í™•íˆ ì¼ì¹˜`
                            });
                        }
                    }
                    if(q.type === 'dynamic') {
                        const mf = document.querySelector(`input[name="${q.id}-followup-male"]:checked`);
                        const ff = document.querySelector(`input[name="${q.id}-followup-female"]:checked`);
                        let dScore = 0;
                        if(mf && mf.value === f.value) dScore += parseInt(mf.dataset.score||4);
                        if(ff && ff.value === m.value) dScore += parseInt(ff.dataset.score||4);
                        scores.pref += dScore;
                    }
                }
            });

            let probability;
            if (exactMatchCount === 0) {
                probability = 100; 
            } else {
                probability = Math.pow(0.25, exactMatchCount) * 100;
            }
            
            let probabilityText = probability.toFixed(2) + "%";
            if (probability < 0.0001) {
                 probabilityText = "0.0001% ë¯¸ë§Œì˜ ê¸°ì "; 
            } else if (probability < 0.01) {
                 probabilityText = probability.toFixed(4) + "%";
            } else if (probability < 1) {
                 probabilityText = probability.toFixed(3) + "%";
            }

            const finalSim = Math.min(100, (scores.sim / 40) * 100); 
            const finalPref = Math.min(100, (scores.pref / 80) * 100); 
            
            let diffSq = 0;
            const groups = Object.keys(sensoryProfiles);
            groups.forEach(g => {
                const mVal = (maleCounts[g]||0), fVal = (femaleCounts[g]||0);
                diffSq += Math.pow(mVal - fVal, 2);
            });
            const finalShape = Math.max(0, 100 - (Math.sqrt(diffSq) * 10)); 
            const totalScore = (finalShape * 0.7) + (finalSim * 0.15) + (finalPref * 0.15);
            
            showResults({
                total: Math.round(totalScore),
                maleCounts, femaleCounts,
                details,
                probabilityText,
                exactMatchCount
            });
        });

        document.getElementById('retry-btn').addEventListener('click', () => location.reload());
        
        // ì´ˆê¸° ì‹¤í–‰
        renderQuestions();
    </script>
</body>
</html>
