<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°í•˜ë‹¤ - ìš°ë¦¬ ë‘˜ë§Œì˜ ê³ ìœ í•œ 'ê²°' ì°¾ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Serif+KR:wght@400;600;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #FDFBF7;
            --accent-gold: #C5A47E;
            --text-main: #2C2C2C;
            --male-color: #5D7D9A;
            --female-color: #D67D88;
        }

        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--primary-bg); color: var(--text-main); }
        h1, h2, h3, h4, .serif-font { font-family: 'Noto Serif KR', serif; }

        .bg-texture {
            background-image: radial-gradient(#E5E7EB 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .question-card { 
            background: white;
            border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            position: relative;
            overflow: hidden;
        }
        .question-card:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.06); 
            border-color: var(--accent-gold);
        }
        
        /* ë¼ë””ì˜¤ ë²„íŠ¼ ìˆ¨ê¹€ ë° ì„ íƒ ìŠ¤íƒ€ì¼ (ì›í˜• ì  ì œê±°) */
        input[type="radio"].hidden-radio {
            appearance: none;
            -webkit-appearance: none;
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
            pointer-events: none;
        }

        .hidden-radio:checked + .option-label {
            background-color: #FAF5EB;
            border-color: var(--accent-gold);
            color: #5A4D3B;
            font-weight: 600;
            box-shadow: inset 0 0 0 1px var(--accent-gold); /* í…Œë‘ë¦¬ ê°•ì¡° */
        }
        /* ì²´í¬ í‘œì‹œ ì•„ì´ì½˜ */
        .hidden-radio:checked + .option-label::before {
            content: 'âœ”';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-gold);
            font-size: 1rem;
        }
        .option-label { 
            position: relative; 
            transition: all 0.2s ease;
        }

        /* ê²°ê³¼ í˜ì´ì§€ í‹°ì¼“ ìŠ¤íƒ€ì¼ */
        .couple-ticket {
            background: white;
            border: 1px solid #E5E7EB;
            position: relative;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .couple-ticket::before, .couple-ticket::after {
            content: '';
            position: absolute;
            height: 40px;
            width: 40px;
            background-color: var(--primary-bg);
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            box-shadow: inset 2px 0 5px rgba(0,0,0,0.05);
        }
        .couple-ticket::before { left: -20px; }
        .couple-ticket::after { right: -20px; }
        .ticket-dashed-line {
            border-top: 2px dashed #E5E7EB;
            margin: 2rem 0;
            position: relative;
        }

        /* ë±ƒì§€ */
        .match-badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 700;
            margin-left: 8px;
            transform: translateY(-1px);
        }
        .match-perfect { background-color: #FFF7ED; color: #D97706; border: 1px solid #FCD34D; }
        .match-texture { background-color: #EFF6FF; color: #2563EB; border: 1px solid #BFDBFE; }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-500 { animation-delay: 0.5s; }

        .text-gradient {
            background: linear-gradient(45deg, var(--male-color), var(--female-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .tarot-card-lg {
            width: 100%;
            aspect-ratio: 2/3.5;
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            transition: transform 0.5s;
            position: relative;
            overflow: hidden;
        }
        .tarot-card-lg:hover { transform: translateY(-5px) scale(1.02); }
        .tarot-overlay {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 20px;
            color: white;
            text-align: center;
        }
    </style>
</head>
<body class="bg-texture min-h-screen text-gray-800">
    
    <nav class="w-full py-5 px-6 border-b border-gray-100 bg-white/80 backdrop-blur-sm fixed top-0 z-50">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-black serif-font tracking-tighter cursor-pointer" onclick="window.location.reload()">
                ê²°<span class="text-sm font-light text-gray-400 ml-1 font-sans">í•˜ë‹¤</span>
            </div>
            <div class="text-xs text-gray-500 tracking-widest uppercase hidden md:block">Relationship Texture Test</div>
        </div>
    </nav>

    <div id="main-container" class="container mx-auto p-4 pt-28 pb-24 max-w-5xl">
        
        <header id="intro-section" class="text-center mb-12 py-8">
            <span class="inline-block py-1 px-3 rounded-full bg-gray-100 text-gray-600 text-xs font-bold mb-4 tracking-wider">COUPLE TEST</span>
            <h1 class="text-4xl md:text-5xl font-bold mb-6 text-gray-800 leading-tight">
                ìš°ë¦¬ì˜ <span class="italic text-gradient">ê²°</span>ì€<br>ì–´ë–»ê²Œ ë§ë¬¼ë ¤ ìˆì„ê¹Œìš”?
            </h1>
            <p class="mt-4 text-gray-600 max-w-xl mx-auto leading-relaxed font-light">
                ì ìˆ˜ë¡œ ë§¤ê¸¸ ìˆ˜ ì—†ëŠ” ë‘ ì‚¬ëŒë§Œì˜ ê³ ìœ í•œ ë¬´ëŠ¬.<br>
                ì†”ì§í•œ ë‹µë³€ì„ í†µí•´ ìš°ë¦¬ì˜ 'ê²°'ì´ ê·¸ë¦¬ëŠ” ê·¸ë¦¼ì„ í™•ì¸í•´ë³´ì„¸ìš”.
            </p>
        </header>

        <div id="question-section" class="fade-in-up">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 relative">
                <div class="hidden lg:block absolute left-1/2 top-0 bottom-0 w-px bg-gray-200 -ml-px"></div>

                <div>
                    <div class="sticky top-24 bg-white/90 backdrop-blur p-4 rounded-xl border border-gray-100 shadow-sm mb-6 z-10 text-center">
                        <h2 class="text-xl font-bold text-blue-900 serif-font flex items-center justify-center">
                            <span class="text-2xl mr-2">ğŸ¤µâ€â™‚ï¸</span> ë‚¨ì
                        </h2>
                    </div>
                    <div id="male-questions" class="space-y-8 px-1"></div>
                </div>

                <div>
                    <div class="sticky top-24 bg-white/90 backdrop-blur p-4 rounded-xl border border-gray-100 shadow-sm mb-6 z-10 text-center">
                        <h2 class="text-xl font-bold text-pink-900 serif-font flex items-center justify-center">
                            <span class="text-2xl mr-2">ğŸ‘°â€â™€ï¸</span> ì—¬ì
                        </h2>
                    </div>
                    <div id="female-questions" class="space-y-8 px-1"></div>
                </div>
            </div>

            <!-- í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë°” (ì¤‘ì•™ ì •ë ¬ ìˆ˜ì •ë¨) -->
            <div class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t p-4 z-40 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]">
                <div class="max-w-5xl mx-auto relative flex justify-center items-center">
                    <!-- ê²½ê³  ë©”ì‹œì§€ëŠ” ì ˆëŒ€ ìœ„ì¹˜ë¡œ ë°°ì¹˜í•˜ì—¬ ì¤‘ì•™ ì •ë ¬ì„ ë°©í•´í•˜ì§€ ì•ŠìŒ -->
                    <div id="warning-message" class="absolute -top-10 left-0 right-0 text-center text-red-500 text-sm font-bold bg-white py-1 hidden animate-bounce">
                        âš ï¸ ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”!
                    </div>
                    
                    <div class="flex gap-3 w-full max-w-md justify-center">
                        <button id="random-btn" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 font-medium py-3.5 px-6 rounded-xl transition-colors text-sm">
                            ğŸ² ëœë¤ ì±„ìš°ê¸°
                        </button>
                        <button id="calculate-btn" class="flex-[2] bg-gray-900 hover:bg-gray-800 text-white font-bold py-3.5 px-10 rounded-xl shadow-lg transform transition active:scale-95 flex items-center justify-center">
                            <span>ê²° í™•ì¸í•˜ê¸°</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="results" class="hidden">
            
            <!-- A. ë©”ì¸ ê²°ê³¼ í‹°ì¼“ (ì ìˆ˜ ì œê±° ë²„ì „) -->
            <div class="max-w-3xl mx-auto fade-in-up">
                <div class="couple-ticket p-8 md:p-12 rounded-3xl text-center">
                    <div class="uppercase tracking-widest text-xs text-gray-400 mb-6">GyolHada Analysis</div>
                    
                    <h2 id="couple-title" class="text-3xl md:text-5xl font-black serif-font text-gray-800 mb-4 break-keep leading-tight"></h2>
                    
                    <!-- ê²°ê³¼ í‚¤ì›Œë“œ ë¹„ì£¼ì–¼ (ì ìˆ˜ ëŒ€ì²´) -->
                    <div class="relative h-48 w-full flex justify-center items-center mb-8">
                        <div class="absolute w-40 h-40 rounded-full bg-blue-500 mix-blend-multiply filter blur-2xl opacity-20 animate-pulse" style="left: 50%; transform: translateX(-70%);"></div>
                        <div class="absolute w-40 h-40 rounded-full bg-pink-500 mix-blend-multiply filter blur-2xl opacity-20 animate-pulse delay-100" style="left: 50%; transform: translateX(-30%);"></div>
                        
                        <div class="relative z-10">
                            <div class="inline-block border-y-2 border-gray-800 py-2 px-6">
                                <span id="result-keyword" class="text-2xl md:text-3xl font-bold serif-font text-gray-800 tracking-widest"></span>
                            </div>
                            <div class="text-xs font-medium text-gray-400 mt-3 uppercase tracking-widest">Relationship Texture Type</div>
                        </div>
                    </div>

                    <div class="ticket-dashed-line"></div>

                    <div class="bg-gray-50 p-8 rounded-2xl text-gray-700 leading-loose break-keep text-left border border-gray-100">
                        <h4 class="font-bold text-gray-800 mb-3 text-lg serif-font flex items-center">
                            <span class="text-xl mr-2">ğŸ’¬</span> ë¶„ì„ ì½”ë©˜íŠ¸
                        </h4>
                        <p id="result-one-liner" class="text-sm md:text-base font-light"></p>
                    </div>
                </div>
            </div>

            <!-- B. Perfect Match í•˜ì´ë¼ì´íŠ¸ -->
            <div id="perfect-match-section" class="mt-12 max-w-3xl mx-auto fade-in-up delay-100 hidden">
                <div class="bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-100 rounded-2xl p-6 md:p-8 shadow-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-yellow-300 rounded-full blur-2xl opacity-30"></div>
                    
                    <h3 class="text-xl font-bold text-amber-900 serif-font mb-4 flex items-center">
                        <span class="text-2xl mr-2">âœ¨</span> ì™„ë²½í•˜ê²Œ í†µí•˜ëŠ” ë¶€ë¶„
                    </h3>
                    <p class="text-sm text-amber-800/70 mb-6">
                        ë‘ ë¶„ì´ ë§í•˜ì§€ ì•Šì•„ë„ í†µí•˜ëŠ” <span class="font-bold underline">ê²°ì •ì ì¸ ì—°ê²°ê³ ë¦¬</span>ì…ë‹ˆë‹¤.
                    </p>
                    
                    <ul id="perfect-match-list" class="space-y-3"></ul>
                </div>
            </div>

            <!-- C. ìƒì„¸ í”„ë¡œí•„ -->
            <div class="mt-16 fade-in-up delay-200">
                <div class="text-center mb-10">
                    <h3 class="text-3xl font-bold serif-font text-gray-800">ê°ìì˜ 'ê²°' ëª¨ì–‘</h3>
                    <p class="text-gray-500 text-sm mt-2">ë‘ ì‚¬ëŒì˜ ì„±í–¥ì´ ì–´ë–»ê²Œ ê²¹ì¹˜ê³  ë‹¤ë¥¸ì§€ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                </div>
                
                <div class="bg-white p-6 md:p-10 rounded-3xl shadow-sm border border-gray-100 max-w-5xl mx-auto">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
                        <div class="relative h-72 md:h-96 w-full">
                             <canvas id="comparisonRadarChart"></canvas>
                        </div>
                        <div class="space-y-6">
                            <div class="p-5 bg-blue-50/50 rounded-2xl border border-blue-100">
                                <div class="flex items-center mb-3">
                                    <span class="text-3xl mr-3">ğŸ¤µâ€â™‚ï¸</span>
                                    <div>
                                        <span class="text-xs font-bold text-blue-400 uppercase">Male Type</span>
                                        <h4 id="result-group-name-male" class="text-lg font-bold text-blue-900 serif-font"></h4>
                                    </div>
                                </div>
                                <p id="result-group-description-male" class="text-sm text-gray-600 leading-relaxed mb-3"></p>
                            </div>
                            <div class="p-5 bg-pink-50/50 rounded-2xl border border-pink-100">
                                <div class="flex items-center mb-3">
                                    <span class="text-3xl mr-3">ğŸ‘°â€â™€ï¸</span>
                                    <div>
                                        <span class="text-xs font-bold text-pink-400 uppercase">Female Type</span>
                                        <h4 id="result-group-name-female" class="text-lg font-bold text-pink-900 serif-font"></h4>
                                    </div>
                                </div>
                                <p id="result-group-description-female" class="text-sm text-gray-600 leading-relaxed mb-3"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- D. íƒ€ë¡œ & ê¶í•© í•´ì„ -->
            <div class="mt-20 fade-in-up delay-300 bg-gray-900 text-white py-16 px-4 -mx-4 md:rounded-3xl md:mx-auto max-w-6xl relative overflow-hidden">
                <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>
                <div class="absolute top-0 left-0 w-64 h-64 bg-purple-500 rounded-full mix-blend-overlay filter blur-3xl opacity-20"></div>
                <div class="absolute bottom-0 right-0 w-64 h-64 bg-indigo-500 rounded-full mix-blend-overlay filter blur-3xl opacity-20"></div>

                <div class="relative z-10 max-w-4xl mx-auto">
                    <div class="text-center mb-12">
                        <span class="text-amber-400 text-xs font-bold tracking-widest uppercase mb-2 block">Tarot Reading</span>
                        <h3 class="text-3xl md:text-4xl font-bold serif-font text-white">ë‘ ë¶„ì˜ ì˜ì  ê¶í•©</h3>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-start">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center">
                                <div id="male-tarot-img" class="tarot-card-lg mb-3">
                                    <div class="tarot-overlay">
                                        <div class="text-xs uppercase tracking-wider opacity-80">Male</div>
                                        <div id="male-tarot-name" class="font-bold serif-font text-lg"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <div id="female-tarot-img" class="tarot-card-lg mb-3">
                                    <div class="tarot-overlay">
                                        <div class="text-xs uppercase tracking-wider opacity-80">Female</div>
                                        <div id="female-tarot-name" class="font-bold serif-font text-lg"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-8">
                            <div>
                                <h4 class="text-xl font-bold text-amber-200 serif-font mb-3 border-b border-gray-700 pb-2">ğŸ”® ì¹´ë“œ í•´ì„</h4>
                                <p id="tarot-compatibility-text" class="text-gray-300 leading-relaxed font-light text-sm md:text-base break-keep"></p>
                            </div>
                            <div class="bg-white/10 p-6 rounded-xl border border-white/10">
                                <h4 class="text-lg font-bold text-white mb-2 serif-font">ğŸ’¡ ê´€ê³„ë¥¼ ìœ„í•œ ì¡°ì–¸</h4>
                                <p id="relationship-advice" class="text-gray-200 text-sm leading-relaxed"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-16 pb-12">
                <button id="retry-btn" class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-800 font-bold py-4 px-12 rounded-full shadow-sm transition-all transform hover:-translate-y-1">
                    ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°
                </button>
            </div>

        </div>
    </div>

    <script>
        // --- 1. ë°ì´í„° (ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ ë™ì¼) ---
        const questions = [
             { id: 'q1', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬ì— ì‚¬ì§„ì„ ì˜¬ë¦°ë‹¤ë©´?', options: [ { value: '1', text: 'ì•„ë¦„ë‹¤ìš´ ìì—° í’ê²½ (ê²½í—˜ì¤‘ì‹œ)', tag: '#ê²½í—˜ì¤‘ì‹œí˜•'}, { value: '2', text: 'ê³ ê¸‰ ë ˆìŠ¤í† ë‘ ìŒì‹ (ì„±ì·¨ì§€í–¥)', tag: '#ì„±ì·¨ì§€í–¥í˜•'}, { value: '3', text: 'ì¹œêµ¬ë“¤ê³¼ì˜ íŒŒí‹° (ì‚¬êµí˜•)', tag: '#ì‚¬êµí˜•'}, { value: '4', text: 'ì˜ ì˜¬ë¦¬ì§€ ì•ŠìŒ (ì•ˆì •ì§€í–¥)', tag: '#ì•ˆì •ì§€í–¥í˜•'} ] },
             { id: 'q2', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ì„ í˜¸í•˜ëŠ” ìš´ë™ ìŠ¤íƒ€ì¼ì€?', options: [ { value: '1', text: 'í˜¼ì ì§‘ì¤‘í•˜ëŠ” ìš´ë™ (ëŸ¬ë‹, í—¬ìŠ¤)', tag: '#ìê¸°ê³„ë°œí˜•'}, { value: '2', text: 'íŒ€ì´ë‚˜ íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜ (í…Œë‹ˆìŠ¤)', tag: '#í™œë™ì ì¸'}, { value: '3', text: 'ìš´ë™ì€ ë³„ë¡œ ì¦ê¸°ì§€ ì•ŠìŒ', tag: '#ì •ì ì¸'} ] },
             { id: 'q22', type: 'similarity', brainType: 'Action (í–‰ë™)', text: 'ì´ìƒì ì¸ ì£¼ë§ì˜ ëª¨ìŠµì€?', options: [ { value: '1', text: 'ì§‘ì—ì„œ í¸ì•ˆí•œ íœ´ì‹ (ì§‘ëŒì´/ì§‘ìˆœì´)', tag: '#ì§‘ìˆœì´/ì§‘ëŒì´'}, { value: '2', text: 'ì·¨ë¯¸ í™œë™ì´ë‚˜ ë°°ì›€', tag: '#ìê¸°ê³„ë°œí˜•'}, { value: '3', text: 'ì¹œêµ¬ë“¤ê³¼ì˜ ëª¨ì„', tag: '#ì‚¬êµí˜•'}, { value: '4', text: 'ê°€ê¹Œìš´ ê³³ìœ¼ë¡œ ì—¬í–‰', tag: '#ëª¨í—˜ì¶”êµ¬í˜•'} ] },
             { id: 'q4', type: 'crossover', brainType: 'Emotion (ê°ì •)', text_me: 'ê¿ˆê¾¸ëŠ” í”„ëŸ¬í¬ì¦ˆëŠ”?', text_partner: 'íŒŒíŠ¸ë„ˆì—ê²Œ í•´ì£¼ê³  ì‹¶ì€ í”„ëŸ¬í¬ì¦ˆëŠ”?', options: [ { value: '1', text: 'ë¶„ìœ„ê¸° ì¢‹ì€ ê³³ì—ì„œ ë¡œë§¨í‹±í•˜ê²Œ', tag: '#ë‚­ë§Œì£¼ì˜í˜•'}, { value: '2', text: 'ë§ì€ ì‚¬ëŒ ì•ì—ì„œì˜ ì´ë²¤íŠ¸', tag: '#ì´ë²¤íŠ¸ì„ í˜¸'}, { value: '3', text: 'ì¶”ì–µì´ ë‹´ê¸´ ê³³ì—ì„œ ì§„ì†”í•˜ê²Œ', tag: '#ê´€ê³„ì¤‘ì‹¬í˜•'}, { value: '4', text: 'í™”ë ¤í•¨ë³´ë‹¤ ì§„ì‹¬ ë‹´ê¸´ í¸ì§€ì™€ ë°˜ì§€', tag: '#ì‹¤ìš©ì£¼ì˜í˜•'} ] },
             { id: 'q5', type: 'crossover', brainType: 'Emotion (ê°ì •)', text_me: 'ê°€ì¥ ì„¤ë ˆëŠ” ì—°ì¸ì˜ í–‰ë™ì€?', text_partner: 'ì—°ì¸ì„ ìœ„í•´ í•´ì£¼ê³  ì‹¶ì€ í–‰ë™ì€?', options: [ { value: '1', text: 'ì‚¬ì†Œí•œ ë§ì„ ê¸°ì–µí•´ì¤„ ë•Œ', tag: '#ì„¸ì‹¬í•¨ì¤‘ì‹œ'}, { value: '2', text: 'ë§ì—†ì´ ê¼­ ì•ˆì•„ì¤„ ë•Œ', tag: '#ìŠ¤í‚¨ì‹­ì¤‘ì‹œ'}, { value: '3', text: 'ë‚˜ì˜ ì¼ì„ ì‘ì›í•´ì¤„ ë•Œ', tag: '#ì •ì„œì ì§€ì§€'}, { value: '4', text: 'ë‚˜ì—ê²Œ ì˜¨ì „íˆ ì§‘ì¤‘í•´ì¤„ ë•Œ', tag: '#ì‹œê°„ê³µìœ í˜•'} ] },
             { id: 'q23', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ê³µê³µì¥ì†Œì—ì„œì˜ ìŠ¤í‚¨ì‹­ì€?', options: [ { value: '1', text: 'ì† ì¡ëŠ” ì •ë„ë§Œ (ë³´ìˆ˜ì )', tag: '#ë³´ìˆ˜ì ê°€ì¹˜ê´€'}, { value: '2', text: 'ì£¼ë³€ í”¼í•´ ì•ˆ ì£¼ë©´ ììœ ë¡­ê²Œ', tag: '#ììœ ë¡œìš´í‘œí˜„'}, { value: '3', text: 'ë‘˜ë§Œì˜ ê³µê°„ì—ì„œë§Œ', tag: '#ì‚¬ìƒí™œì¤‘ì‹œ'}, { value: '4', text: 'ë¶„ìœ„ê¸°ì— ë”°ë¼ ë‹¤ë¦„', tag: '#ìƒí™©ì ì‘í˜•'} ] },
             { id: 'q26', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ë¹„ ì˜¤ëŠ” ë‚ , ì—°ì¸ì´ íšŒì‚¬ ì•ìœ¼ë¡œ ë°ë¦¬ëŸ¬ ì™”ë‹¤ë©´?', options: [ { value: '1', text: 'ì–´ë–»ê²Œ ì™”ì–´! ë„ˆë¬´ ê³ ë§ˆì›Œ (ê°ë™)', tag: '#ê°ì •í‘œí˜„í˜•'}, { value: '2', text: 'ê³ ìƒìŠ¤ëŸ½ê²Œ ì™œ ì™”ì–´~ (ê±±ì •)', tag: '#ë°°ë ¤í˜•'}, { value: '3', text: 'ë§ˆì¹¨ ë³´ê³  ì‹¶ì—ˆëŠ”ë° ì˜ëë‹¤!', tag: '#ë‚­ë§Œì£¼ì˜í˜•'}, { value: '4', text: 'ì˜ ì™”ë‹¤, ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°€ì!', tag: '#ì‹¤ìš©ì£¼ì˜í˜•'} ] },
             { id: 'q17', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ê¹»ì ë…¼ìŸ (ë‚´ ì¹œêµ¬ì˜ ê¹»ìì„ ì—°ì¸ì´ ë–¼ì–´ì¤Œ)', options: [ { value: '1', text: 'ìƒê´€ì—†ìŒ, ë§¤ë„ˆì„', tag: '#ì¿¨í•œì—°ì• '}, { value: '2', text: 'ê¸°ë¶„ ë‚˜ì˜ì§€ë§Œ í‹° ì•ˆ ëƒ„', tag: '#ê°ì •ì¡°ì ˆí˜•'}, { value: '3', text: 'ì§ˆíˆ¬ë‚¨, ì¥ë‚œìŠ¤ëŸ½ê²Œ í‘œí˜„', tag: '#ê´€ê³„ì¤‘ì‹¬í˜•'}, { value: '4', text: 'ì ˆëŒ€ ì•ˆ ë¨, ì •ìƒ‰', tag: '#ì›ì¹™ì£¼ì˜í˜•'} ] },
             { id: 'q18', type: 'similarity', brainType: 'Emotion (ê°ì •)', text: 'ì„ í˜¸í•˜ëŠ” ë°˜ë ¤ë™ë¬¼ ìŠ¤íƒ€ì¼', options: [ { value: '1', text: 'í™œë™ì ì¸ ê°•ì•„ì§€', tag: '#í™œë™ì ì¸'}, { value: '2', text: 'ì¡°ìš©í•œ ê³ ì–‘ì´', tag: '#ì°¨ë¶„í•œ'}, { value: '3', text: 'ì¢‹ì§€ë§Œ í‚¤ìš¸ ìì‹  ì—†ìŒ', tag: '#í˜„ì‹¤ì£¼ì˜í˜•'}, { value: '4', text: 'í‚¤ìš°ëŠ” ê²ƒ ì„ í˜¸ ì•ˆ í•¨', tag: '#ê°œì¸ì£¼ì˜í˜•'} ] },
             { id: 'q11', type: 'similarity', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ì¹œêµ¬ê°€ ì¶”ì²œí•œ í™•ì‹¤í•œ ì£¼ì‹ ì •ë³´, íˆ¬ìëŠ”?', options: [ { value: '1', text: 'ë¯¿ê³  ì˜ëŒ íˆ¬ì', tag: '#ê³¼ê°í•œíˆ¬ì'}, { value: '2', text: 'í˜„ê¸ˆ ìì‚° ì „ë¶€ íˆ¬ì', tag: '#ê³µê²©ì íˆ¬ì'}, { value: '3', text: 'ì—¬ìœ  ìê¸ˆì˜ ì ˆë°˜ë§Œ', tag: '#ì•ˆì •ì íˆ¬ì'}, { value: '4', text: 'ë¶„ì„ ì—†ì´ íˆ¬ì ì•ˆ í•¨', tag: '#ì›ì¹™ì£¼ì˜í˜•'} ] },
             { id: 'q19', type: 'crossover', brainType: 'Thinking (ê°€ì¹˜ê´€)', text_me: 'ê°ˆë“± ë°œìƒ ì‹œ ë‚˜ì˜ í•´ê²° ìŠ¤íƒ€ì¼', text_partner: 'íŒŒíŠ¸ë„ˆê°€ í•´ì¤¬ìœ¼ë©´ í•˜ëŠ” í•´ê²° ë°©ì‹', options: [ { value: '1', text: 'ì‹œê°„ì„ ê°–ê³  ì°¨ë¶„íˆ ëŒ€í™”', tag: '#ë…¼ë¦¬ì ëŒ€í™”'}, { value: '2', text: 'ë¹¨ë¦¬ ì‚¬ê³¼í•˜ê³  ë®ê¸°', tag: '#ê°ˆë“±íšŒí”¼í˜•'}, { value: '3', text: 'ê°ì •ì„ ë‹¤ í„¸ì–´ë†“ê¸°', tag: '#ê°ì •í‘œì •í˜•'}, { value: '4', text: 'í•¨ê»˜ ì›ì¸ ë¶„ì„í•˜ê¸°', tag: '#ë¬¸ì œí•´ê²°í˜•'} ] },
             { id: 'q27', type: 'dynamic', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ì²­ì†Œ í›„ êµ¬ì„ì— ë¨¼ì§€ê°€ ë‚¨ì•˜ë‹¤ë©´?', options: [ { value: '1', text: 'í•´ì¤€ ê²Œ ì–´ë””ì•¼, ê³ ë§ˆì›Œí•¨', tag: '#ê¸ì •ì ê°•í™”', followup: { text: 'ë°˜ë³µëœë‹¤ë©´?', options: [{ value: '1', text: 'ë§ ì•ˆ í•´ë„ ê³ ì³ì£¼ê¸¸' }, { value: '2', text: 'ì§ì ‘ ë§í•¨' }, { value: '3', text: 'ë‚´ê°€ í•¨' }] } }, { value: '2', text: 'ë‹¤ìŒì—” ì—¬ê¸°ë„ ë¶€íƒí•´ (í”¼ë“œë°±)', tag: '#í”¼ë“œë°±ì œê³µ', followup: { text: 'ê·¸ë˜ë„ ì•ˆ ê³ ì³ì§€ë©´?', options: [{ value: '1', text: 'ì§„ì§€í•˜ê²Œ ëŒ€í™”' }, { value: '2', text: 'í¬ê¸°í•˜ê³  ë‚´ê°€ í•¨' }, { value: '3', text: 'ì”ì†Œë¦¬í•¨' }] } }, { value: '3', text: 'ë§ì—†ì´ ë‚´ê°€ ì¹˜ì›€', tag: '#ê°ˆë“±íšŒí”¼í˜•', followup: { text: 'ë¶ˆë§Œì´ ìŒ“ì¸ë‹¤ë©´?', options: [{ value: '1', text: 'ì•Œì•„ì„œ ëˆˆì¹˜ì±„ê¸¸' }, { value: '2', text: 'í­ë°œí•¨' }, { value: '3', text: 'ê·¸ëƒ¥ ì°¸ìŒ' }] } }, { value: '4', text: 'ê·¸ ì •ë„ëŠ” ì‹ ê²½ ì•ˆ ì”€', tag: '#YOLO', followup: { text: 'ìƒëŒ€ê°€ ê¹”ë”í•˜ë‹¤ë©´?', options: [{ value: '1', text: 'ë§ì¶°ì£¼ë ¤ ë…¸ë ¥' }, { value: '2', text: 'ìƒëŒ€ê°€ ì´í•´í•´ì•¼ í•¨' }, { value: '3', text: 'ì—…ì²´ ë¶€ë¦„' }] } } ] },
             { id: 'q24', type: 'crossover', brainType: 'Thinking (ê°€ì¹˜ê´€)', text_me: 'ì ì ˆí•œ ë³¸ê°€ ë°©ë¬¸ ë¹ˆë„ëŠ”?', text_partner: 'íŒŒíŠ¸ë„ˆê°€ ì›í–ˆìœ¼ë©´ í•˜ëŠ” ë¹ˆë„ëŠ”?', options: [ { value: '1', text: 'íŠ¹ë³„í•œ ë‚ ì—ë§Œ', tag: '#ë…ë¦½ì„±ì¤‘ì‹œ'}, { value: '2', text: 'í•œë‘ ë‹¬ì— í•œ ë²ˆ', tag: '#ê°€ì¡±ì¤‘ì‹¬í˜•'}, { value: '3', text: 'ì›í•  ë•Œ ììœ ë¡­ê²Œ', tag: '#ììœ ì¶”êµ¬í˜•'}, { value: '4', text: 'ìì£¼ ì™•ë˜í•˜ë©° ê°€ê¹ê²Œ', tag: '#ê´€ê³„ì¤‘ì‹¬í˜•'} ] },
             { id: 'q25', type: 'dynamic', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ê°€ì‚¬ ë¶„ë‹´ì— ëŒ€í•œ ìƒê°ì€?', options: [ { value: '1', text: 'ì² ì €í•œ ì—­í•  ë¶„ë‹´', tag: '#íš¨ìœ¨ì¤‘ì‹œí˜•', followup: { text: 'ì•ˆ ì§€ì¼œì§„ë‹¤ë©´?', options: [{ value: '1', text: 'ì¬í˜‘ìƒ' }, { value: '2', text: 'ë‚´ê°€ í•¨' }, { value: '3', text: 'ê·¸ëƒ¥ ë‘ ' }]}}, { value: '2', text: 'ì‹œê°„ ë˜ëŠ” ì‚¬ëŒì´', tag: '#ììœ¨í˜•', followup: { text: 'ë‚˜ë§Œ í•œë‹¤ë©´?', options: [{ value: '1', text: 'ë¶ˆë§Œ í‘œì¶œ' }, { value: '2', text: 'ëˆˆì¹˜ ì¤Œ' }, { value: '3', text: 'ë‚´ê°€ ë” ì˜í•˜ë‹ˆê¹Œ í•¨' }]}}, { value: '3', text: 'ì£¼ë§ì— ëª°ì•„ì„œ ê°™ì´', tag: '#ê³„íší˜•', followup: { text: 'ì£¼ë§ ì•½ì†ì´ ìƒê¸°ë©´?', options: [{ value: '1', text: 'ì²­ì†Œê°€ ìš°ì„ ' }, { value: '2', text: 'ì•½ì† ì¡´ì¤‘' }, { value: '3', text: 'í‰ì¼ì— ë‚˜ëˆ ì„œ' }]}}, { value: '4', text: 'ê¸°ê³„ì™€ ë„ìš°ë¯¸ í™œìš©', tag: '#í¸ë¦¬ì„±ì¶”êµ¬', followup: { text: 'ë¹„ìš©ì´ ë¶€ë‹´ë˜ë©´?', options: [{ value: '1', text: 'í¸ë¦¬í•¨ì´ ìš°ì„ ' }, { value: '2', text: 'ì¤„ì„' }, { value: '3', text: 'ìš°ë¦¬ê°€ í•¨' }]}} ] },
             { id: 'q12', type: 'similarity', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ì´ìƒì ì¸ ìë…€ ê³„íš', options: [ { value: '1', text: 'ë”©í¬ì¡± (ì—†ìŒ)', tag: '#ê°œì¸ì£¼ì˜í˜•'}, { value: '2', text: 'í•œ ëª…ì—ê²Œ ì§‘ì¤‘', tag: '#ê³„íší˜•'}, { value: '3', text: 'ë‘ ëª… ì´ìƒ', tag: '#ê°€ì •ì¤‘ì‹¬í˜•'}, { value: '4', text: 'ë‹¤ë‘¥ì´ ê°€ì¡±', tag: '#ë‹¤ìë…€ì„ í˜¸'} ] },
             { id: 'q13', type: 'crossover', brainType: 'Thinking (ê°€ì¹˜ê´€)', text_me: 'ì„ í˜¸í•˜ëŠ” ê²½ì œ í™œë™ í˜•íƒœ', text_partner: 'íŒŒíŠ¸ë„ˆê°€ ì›í–ˆìœ¼ë©´ í•˜ëŠ” í˜•íƒœ', options: [ { value: '1', text: 'ë§ë²Œì´ (ì»¤ë¦¬ì–´ ì¤‘ì‹œ)', tag: '#ì„±ì¥ì§€í–¥í˜•'}, { value: '2', text: 'ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ', tag: '#ìƒí™©ì ì‘í˜•'}, { value: '3', text: 'ì™¸ë²Œì´ (ê°€ì‚¬ ì „ë‹´)', tag: '#ì „í†µì ê°€ì¹˜ê´€'}, { value: '4', text: 'ê²½ì œì  ììœ  (íŒŒì´ì–´ì¡±)', tag: '#ììœ ì¶”êµ¬í˜•'} ] },
             { id: 'q15', type: 'similarity', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ê²°í˜¼ì„ ì›í•˜ëŠ” ê°€ì¥ í° ì´ìœ ', options: [ { value: '1', text: 'ì •ì„œì  ì•ˆì •ê°', tag: '#ì•ˆì •ì§€í–¥í˜•'}, { value: '2', text: 'ì‚¬ë‘ì˜ ê²°ì‹¤/ê°€ì •', tag: '#ê°€ì •ì¤‘ì‹¬í˜•'}, { value: '3', text: 'í•¨ê»˜ ì„±ì¥í•˜ëŠ” íŒŒíŠ¸ë„ˆ', tag: '#ì„±ì¥ì§€í–¥í˜•'}, { value: '4', text: 'ì¦ê±°ìš´ ì¸ìƒ ë™ë°˜ì', tag: '#ëª¨í—˜ì¶”êµ¬í˜•'} ] },
             { id: 'q16', type: 'dynamic', brainType: 'Thinking (ê°€ì¹˜ê´€)', text: 'ì‹ í˜¼ì§‘ ì„ íƒì˜ ìµœìš°ì„  ì¡°ê±´', options: [ { value: '1', text: 'ì„œìš¸ ì¤‘ì‹¬ì§€ (ë¯¸ë˜ê°€ì¹˜)', tag: '#ë¯¸ë˜ê°€ì¹˜ì¤‘ì‹œ', followup: { text: 'ì§‘ì´ ì¢ë‹¤ë©´?', options: [{ value: '1', text: 'ì°¸ìŒ' }, { value: '2', text: 'ê³ ë¯¼' }, { value: '3', text: 'ì‹«ìŒ' }]}}, { value: '2', text: 'ì‹ ë„ì‹œ ì‹ ì¶• (ì¾Œì í•¨)', tag: '#í˜„ì¬ì•ˆì •ì¤‘ì‹œ', followup: { text: 'ì¶œí‡´ê·¼ì´ ë©€ë‹¤ë©´?', options: [{ value: '1', text: 'ê°ìˆ˜' }, { value: '2', text: 'í˜ë“¦' }, { value: '3', text: 'ì ˆëŒ€ ì•ˆ ë¨' }]}}, { value: '3', text: 'ì§ì£¼ê·¼ì ‘ (í¸ë¦¬í•¨)', tag: '#ì‹¤ìš©ì£¼ì˜í˜•', followup: { text: 'ì§‘ì´ ë‚¡ì•˜ë‹¤ë©´?', options: [{ value: '1', text: 'ë¦¬ëª¨ë¸ë§í•˜ë©´ ë¨' }, { value: '2', text: 'ê³ ë¯¼' }, { value: '3', text: 'ì‹«ìŒ' }]}}, { value: '4', text: 'ì·¨í–¥ ë‹´ê¸´ ì¸í…Œë¦¬ì–´', tag: '#ì‹¬ë¯¸ì£¼ì˜í˜•', followup: { text: 'ì˜ˆì‚° ì´ˆê³¼ë¼ë©´?', options: [{ value: '1', text: 'ë¬´ë¦¬í•´ì„œë¼ë„' }, { value: '2', text: 'íƒ€í˜‘' }, { value: '3', text: 'í¬ê¸°' }]}} ] }
        ];

        const tagGroups = {
            EMOTIONAL_CONNECT: { tags: ['#ë‚­ë§Œì£¼ì˜í˜•', '#ê´€ê³„ì¤‘ì‹¬í˜•', '#ì„¸ì‹¬í•¨ì¤‘ì‹œ', '#ìŠ¤í‚¨ì‹­ì¤‘ì‹œ', '#ì •ì„œì ì§€ì§€', '#ë°°ë ¤í˜•', '#ê°ì •í‘œí˜„í˜•', '#ê¸ì •ì ê°•í™”', '#ê°€ì¡±ì¤‘ì‹¬í˜•', '#ë‹¤ìë…€ì„ í˜¸', '#ì‹œê°„ê³µìœ í˜•'] },
            PRACTICAL_RATIONAL: { tags: ['#ì‹¤ìš©ì£¼ì˜í˜•', '#ì›ì¹™ì£¼ì˜í˜•', '#í˜„ì‹¤ì£¼ì˜í˜•', '#ë…¼ë¦¬ì ëŒ€í™”', '#ë¬¸ì œí•´ê²°í˜•', '#íš¨ìœ¨ì¤‘ì‹œí˜•', '#í”¼ë“œë°±ì œê³µ', '#ë¯¸ë˜ê°€ì¹˜ì¤‘ì‹œ', '#í˜„ì¬ì•ˆì •ì¤‘ì‹œ'] }, 
            STABILITY_ORIENTED: { tags: ['#ì•ˆì •ì§€í–¥í˜•', '#ì•ˆì •ì íˆ¬ì', '#ê³„íší˜•', '#ì§‘ìˆœì´/ì§‘ëŒì´', '#ë³´ìˆ˜ì ê°€ì¹˜ê´€', '#ì „í†µì ê°€ì¹˜ê´€', '#ì •ì ì¸'] },
            ACTIVE_EXPERIENCE: { tags: ['#ê²½í—˜ì¤‘ì‹œí˜•', '#ì„±ì·¨ì§€í–¥í˜•', '#ì‚¬êµí˜•', '#í™œë™ì ì¸', '#ëª¨í—˜ì¶”êµ¬í˜•', '#ì´ë²¤íŠ¸ì„ í˜¸', '#ê³¼ê°í•œíˆ¬ì', '#ê³µê²©ì íˆ¬ì', '#ìê¸°ê³„ë°œí˜•', '#ì„±ì¥ì§€í–¥í˜•'] },
            AUTONOMY_FLEXIBILITY: { tags: ['#ê°œì¸ì£¼ì˜í˜•', '#ì¿¨í•œì—°ì• ', '#ììœ ë¡œìš´í‘œí˜„', '#ì‚¬ìƒí™œì¤‘ì‹œ', '#ììœ ì¶”êµ¬í˜•', '#ë…ë¦½ì„±ì¤‘ì‹œ', '#ììœ¨í˜•', '#ê°ˆë“±íšŒí”¼í˜•', '#ììœ ë¡œìš´', '#YOLO'] }, 
            ADAPTIVE_BALANCED: { tags: ['#ìƒí™©ì ì‘í˜•', '#ê°ì •ì¡°ì ˆí˜•', '#í¸ë¦¬ì„±ì¶”êµ¬', '#ì‹¬ë¯¸ì£¼ì˜í˜•', '#ì°¨ë¶„í•œ'] }
        };
        
        const sensoryProfiles = {
            EMOTIONAL_CONNECT: { name: "ê°ì„±ì˜ ê²°", description: "ë§ˆìŒì˜ ì˜¨ê¸°ì™€ ì •ì„œì  êµë¥˜ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤.", colorCode: "#F9A8D4" },
            PRACTICAL_RATIONAL: { name: "ì´ì„±ì˜ ê²°", description: "íš¨ìœ¨ê³¼ ë…¼ë¦¬ë¥¼ ì¤‘ì‹œí•˜ë©° ëª…í™•í•œ í•´ê²°ì±…ì„ ì°¾ìŠµë‹ˆë‹¤.", colorCode: "#3B82F6" },
            STABILITY_ORIENTED: { name: "ì•ˆì •ì˜ ê²°", description: "ë³€í•¨ì—†ëŠ” ì‹ ë¢°ì™€ ì˜ˆì¸¡ ê°€ëŠ¥í•œ í‰ì˜¨í•¨ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.", colorCode: "#22C55E" },
            ACTIVE_EXPERIENCE: { name: "í™œë™ì˜ ê²°", description: "ìƒˆë¡œìš´ ë„ì „ê³¼ ê²½í—˜ì„ í†µí•´ ì‚¶ì˜ ì—ë„ˆì§€ë¥¼ ì–»ìŠµë‹ˆë‹¤.", colorCode: "#F59E0B" },
            AUTONOMY_FLEXIBILITY: { name: "ììœ ì˜ ê²°", description: "ì–½ë§¤ì´ì§€ ì•ŠëŠ” ììœ ì™€ ì„œë¡œì˜ ë…ë¦½ì„±ì„ ì¡´ì¤‘í•©ë‹ˆë‹¤.", colorCode: "#8B5CF6" },
            ADAPTIVE_BALANCED: { name: "ì¡°í™”ì˜ ê²°", description: "ì–´ë–¤ ìƒí™©ì—ì„œë„ ìœ ì—°í•˜ê²Œ ì ì‘í•˜ë©° ê· í˜•ì„ ë§ì¶¥ë‹ˆë‹¤.", colorCode: "#6B7280" }
        };

        const tarotMap = {
            EMOTIONAL_CONNECT: { name: "The Lovers", img: "https://upload.wikimedia.org/wikipedia/ko/d/db/RWS_Tarot_06_Lovers.jpg" },
            PRACTICAL_RATIONAL: { name: "Justice", img: "https://upload.wikimedia.org/wikipedia/ko/e/e0/RWS_Tarot_11_Justice.jpg" },
            STABILITY_ORIENTED: { name: "The Hierophant", img: "https://upload.wikimedia.org/wikipedia/ko/8/8d/RWS_Tarot_05_Hierophant.jpg" },
            ACTIVE_EXPERIENCE: { name: "The Chariot", img: "https://upload.wikimedia.org/wikipedia/ko/9/9b/RWS_Tarot_07_Chariot.jpg" },
            AUTONOMY_FLEXIBILITY: { name: "The Fool", img: "https://upload.wikimedia.org/wikipedia/ko/9/90/RWS_Tarot_00_Fool.jpg" },
            ADAPTIVE_BALANCED: { name: "Temperance", img: "https://upload.wikimedia.org/wikipedia/ko/f/f8/RWS_Tarot_14_Temperance.jpg" }
        };

        // ìƒì„¸í•œ íƒ€ë¡œ í•´ì„ ë°ì´í„° (ë‚´ë¶€ DB)
        const tarotReadings = {
            'EMOTIONAL_CONNECT_EMOTIONAL_CONNECT': "ë‘ ë¶„ì€ 'ì—°ì¸' ì¹´ë“œì²˜ëŸ¼ ì„œë¡œì˜ ë§ˆìŒì„ ê±°ìš¸ì²˜ëŸ¼ ë¹„ì¶”ëŠ” ê´€ê³„ì…ë‹ˆë‹¤. ë§í•˜ì§€ ì•Šì•„ë„ í†µí•˜ëŠ” ê¹Šì€ ìœ ëŒ€ê°ì„ ê°€ì¡Œì§€ë§Œ, ë•Œë¡œëŠ” ê°ì •ì— íœ©ì“¸ë ¤ í˜„ì‹¤ì ì¸ ë¬¸ì œë¥¼ ë†“ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•˜ì„¸ìš”.",
            'PRACTICAL_RATIONAL_PRACTICAL_RATIONAL': "ë‘ ë¶„ì€ 'ì •ì˜' ì¹´ë“œì²˜ëŸ¼ ê³µì •í•˜ê³  ëª…í™•í•œ ê´€ê³„ì…ë‹ˆë‹¤. ì˜¤í•´ ì—†ëŠ” ê¹”ë”í•œ ì†Œí†µì´ ê°•ì ì´ì§€ë§Œ, ë„ˆë¬´ ì˜³ê³  ê·¸ë¦„ì„ ë”°ì§€ë‹¤ ë³´ë©´ ì •ì„œì ì¸ êµê°ì´ ë©”ë§ë¼ë²„ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            'STABILITY_ORIENTED_STABILITY_ORIENTED': "ë‘ ë¶„ì€ 'êµí™©' ì¹´ë“œì²˜ëŸ¼ ì‹ ë¢°ì™€ ì „í†µì„ ì¤‘ì‹œí•©ë‹ˆë‹¤. í”ë“¤ë¦¼ ì—†ëŠ” í¸ì•ˆí•¨ì´ í° ì¥ì ì´ì§€ë§Œ, ê´€ê³„ê°€ ë„ˆë¬´ ë‹¨ì¡°ë¡œì›Œì§€ì§€ ì•Šë„ë¡ ê°€ë”ì€ ìƒˆë¡œìš´ ë°ì´íŠ¸ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.",
            'ACTIVE_EXPERIENCE_ACTIVE_EXPERIENCE': "ë‘ ë¶„ì€ 'ì „ì°¨' ì¹´ë“œì²˜ëŸ¼ í•¨ê»˜ ëª©í‘œë¥¼ í–¥í•´ ëŒì§„í•˜ëŠ” íŒŒì›Œ ì»¤í”Œì…ë‹ˆë‹¤. ì—ë„ˆì§€ê°€ ë„˜ì¹˜ì§€ë§Œ, ë‘˜ ë‹¤ ë¦¬ë“œí•˜ë ¤ë‹¤ ì¶©ëŒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ì„œë¡œ ì–‘ë³´í•˜ëŠ” ì§€í˜œê°€ í•„ìš”í•©ë‹ˆë‹¤.",
            'AUTONOMY_FLEXIBILITY_AUTONOMY_FLEXIBILITY': "ë‘ ë¶„ì€ 'ê´‘ëŒ€' ì¹´ë“œì²˜ëŸ¼ ììœ ë¡œìš´ ì˜í˜¼ì˜ ë§Œë‚¨ì…ë‹ˆë‹¤. ì„œë¡œì˜ ì‚¬ìƒí™œì„ ì™„ë²½íˆ ì¡´ì¤‘í•˜ì§€ë§Œ, ìì¹«í•˜ë©´ ê´€ê³„ì˜ ëˆì´ ëŠìŠ¨í•´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ 'ìš°ë¦¬'ë¼ëŠ” ê³µë™ì˜ ë¯¸ë˜ë¥¼ ìì£¼ ê·¸ë ¤ë³´ì„¸ìš”.",
            'ADAPTIVE_BALANCED_ADAPTIVE_BALANCED': "ë‘ ë¶„ì€ 'ì ˆì œ' ì¹´ë“œì²˜ëŸ¼ ë¬¼ íë¥´ë“¯ í‰í™”ë¡œìš´ ê´€ê³„ì…ë‹ˆë‹¤. ì‹¸ì›€ì´ ê±°ì˜ ì—†ì§€ë§Œ, ê°ˆë“±ì„ í”¼í•˜ë ¤ë‹¤ ì†ë§ˆìŒì„ ìˆ¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ë”ì€ ì†”ì§í•œ ë¶ˆë§Œë„ í„¸ì–´ë†“ìœ¼ì„¸ìš”.",
            'DEFAULT': "ì„œë¡œ ë‹¤ë¥¸ ë§¤ë ¥ì„ ê°€ì§„ ë‘ ë¶„ì´ ë§Œë‚¬ìŠµë‹ˆë‹¤. ì„œë¡œì˜ ì°¨ì´ë¥¼ 'í‹€ë¦¼'ì´ ì•„ë‹Œ 'ë‹¤ë¦„'ìœ¼ë¡œ ë°›ì•„ë“¤ì¼ ë•Œ, ì´ ê´€ê³„ëŠ” ì„œë¡œì˜ ì„¸ê³„ë¥¼ ë„“í˜€ì£¼ëŠ” ê°€ì¥ í›Œë¥­í•œ ì—¬í–‰ì´ ë  ê²ƒì…ë‹ˆë‹¤."
        };

        // --- DOM Elements & Render ---
        const maleContainer = document.getElementById('male-questions');
        const femaleContainer = document.getElementById('female-questions');
        let totalQuestions = 0;

        function createQuestionHTML(q, gender) {
            const isMale = gender === 'male';
            
            let badge = '';
            if (q.type === 'similarity') badge = `<span class="text-[10px] font-bold tracking-wider text-gray-400 uppercase border border-gray-200 px-2 py-0.5 rounded-full">ìœ ì‚¬ì„±</span>`;
            else if (q.type === 'crossover') badge = `<span class="text-[10px] font-bold tracking-wider text-purple-500 uppercase border border-purple-100 bg-purple-50 px-2 py-0.5 rounded-full">ì„ í˜¸ë„</span>`;
            else if (q.type === 'dynamic') badge = `<span class="text-[10px] font-bold tracking-wider text-amber-500 uppercase border border-amber-100 bg-amber-50 px-2 py-0.5 rounded-full">ì‹¬í™”</span>`;

            const optionsHTML = q.options.map((opt, idx) => {
                const onChange = q.type === 'dynamic' ? 
                    `onchange="handleDynamic(this, '${q.id}', '${gender}', '${encodeURIComponent(JSON.stringify(opt.followup))}')"` : '';
                
                return `
                <div class="relative">
                    <input type="radio" name="${q.id}-me-${gender}" value="${opt.value}" data-tag="${opt.tag}" data-text="${opt.text}"
                           id="${q.id}-me-${gender}-${idx}" class="hidden-radio peer" ${onChange}>
                    <label for="${q.id}-me-${gender}-${idx}" 
                           class="option-label block w-full p-4 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-all text-sm text-gray-600 peer-checked:bg-${isMale?'blue':'pink'}-50 peer-checked:border-${isMale?'blue':'pink'}-300 peer-checked:text-${isMale?'blue':'pink'}-700">
                        ${opt.text}
                    </label>
                </div>`;
            }).join('');

            let partnerSection = '';
            if (q.type === 'crossover') {
                const partnerOptions = q.options.map((opt, idx) => `
                    <div class="relative">
                        <input type="radio" name="${q.id}-partner-${gender}" value="${opt.value}" data-tag="${opt.tag}" data-text="${opt.text}"
                               id="${q.id}-partner-${gender}-${idx}" class="hidden-radio peer">
                        <label for="${q.id}-partner-${gender}-${idx}" 
                               class="option-label block w-full p-3 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-all text-xs text-gray-500 peer-checked:bg-purple-50 peer-checked:border-purple-300 peer-checked:text-purple-700">
                            ${opt.text}
                        </label>
                    </div>`).join('');
                
                partnerSection = `
                <div class="mt-4 pt-4 border-t border-dashed border-gray-200">
                    <p class="text-xs font-bold text-gray-500 mb-2">Q. ${q.text_partner}</p>
                    <div class="grid grid-cols-1 gap-2">${partnerOptions}</div>
                </div>`;
            }

            return `
            <div class="question-card p-6 rounded-2xl mb-6">
                <div class="flex justify-between items-center mb-3">
                    <span class="text-xs font-medium text-gray-400">${q.brainType}</span>
                    ${badge}
                </div>
                <h3 class="font-bold text-gray-800 mb-4 text-base leading-snug break-keep">
                    ${q.type === 'crossover' ? q.text_me : q.text}
                </h3>
                <div class="space-y-2 grid grid-cols-1 gap-1">
                    ${optionsHTML}
                </div>
                ${partnerSection}
            </div>`;
        }

        function handleDynamic(radio, qId, gender, dataStr) {
            const data = JSON.parse(decodeURIComponent(dataStr));
            const card = radio.closest('.question-card');
            const existing = card.querySelector('.dynamic-area');
            if (existing) existing.remove();

            const div = document.createElement('div');
            div.className = 'dynamic-area mt-4 pt-4 border-t border-amber-100 bg-amber-50/50 -mx-6 px-6 pb-4 animate-fade-in-up';
            div.innerHTML = `
                <p class="text-xs font-bold text-amber-600 mb-2">â†³ ${data.text}</p>
                <div class="grid grid-cols-1 gap-2">
                    ${data.options.map((opt, i) => `
                        <div>
                            <input type="radio" name="${qId}-followup-${gender}" value="${opt.value}" id="${qId}-fu-${gender}-${i}" class="hidden-radio peer" data-score="${opt.value==='1'?6:opt.value==='2'?5:4}" data-text="${opt.text}">
                            <label for="${qId}-fu-${gender}-${i}" class="option-label block w-full p-3 bg-white rounded-xl border border-amber-200 text-xs text-gray-600 cursor-pointer hover:bg-white/80 peer-checked:bg-amber-100 peer-checked:text-amber-800 peer-checked:font-bold peer-checked:border-amber-400">${opt.text}</label>
                        </div>
                    `).join('')}
                </div>
            `;
            card.appendChild(div);
        }

        function renderQuestions() {
            let maleHTML = '', femaleHTML = '';
            questions.forEach(q => {
                maleHTML += createQuestionHTML(q, 'male');
                femaleHTML += createQuestionHTML(q, 'female');
                totalQuestions++; 
            });
            maleContainer.innerHTML = maleHTML;
            femaleContainer.innerHTML = femaleHTML;
        }

        // ëœë¤ ë²„íŠ¼
        document.getElementById('random-btn').addEventListener('click', () => {
            document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
            const groups = {}; 
            document.querySelectorAll('input[type="radio"]').forEach(r => {
                if(!groups[r.name]) groups[r.name] = [];
                groups[r.name].push(r);
            });
            Object.values(groups).forEach(options => {
                const random = options[Math.floor(Math.random() * options.length)];
                random.checked = true;
                if(random.getAttribute('onchange')) random.dispatchEvent(new Event('change'));
            });
            setTimeout(() => {
                const dynGroups = {};
                document.querySelectorAll('.dynamic-area input[type="radio"]').forEach(r => {
                     if(!dynGroups[r.name]) dynGroups[r.name] = [];
                     dynGroups[r.name].push(r);
                });
                Object.values(dynGroups).forEach(options => {
                    const random = options[Math.floor(Math.random() * options.length)];
                    random.checked = true;
                });
            }, 100);
        });

        // --- ê²°ê³¼ ê³„ì‚° ë° í‘œì‹œ ---
        document.getElementById('calculate-btn').addEventListener('click', () => {
            const scores = { sim: 0, pref: 0, shape: 0 };
            const details = { sim: [], pref: [], perfect: [] };
            const maleCounts = {}, femaleCounts = {};
            
            questions.forEach(q => {
                const m = document.querySelector(`input[name="${q.id}-me-male"]:checked`);
                const f = document.querySelector(`input[name="${q.id}-me-female"]:checked`);
                
                if(m && f) {
                    const mGroup = getGroup(m.dataset.tag);
                    const fGroup = getGroup(f.dataset.tag);
                    if(mGroup) maleCounts[mGroup] = (maleCounts[mGroup]||0)+1;
                    if(fGroup) femaleCounts[fGroup] = (femaleCounts[fGroup]||0)+1;
                    
                    let isPerfect = false;

                    // Similarity Logic
                    if(q.type === 'similarity') {
                        if(m.value === f.value) { scores.sim += 4; isPerfect = true; } 
                        else if(mGroup === fGroup) { scores.sim += 3; }
                    }
                    
                    // Preference Logic (Crossover)
                    if(q.type === 'crossover') {
                        const mp = document.querySelector(`input[name="${q.id}-partner-male"]:checked`);
                        const fp = document.querySelector(`input[name="${q.id}-partner-female"]:checked`);
                        let prefScore = 0;
                        let pMatch = false;
                        
                        if(mp && mp.value === f.value) { prefScore += 8; pMatch = true; }
                        if(fp && fp.value === m.value) { prefScore += 8; pMatch = true; }

                        scores.pref += prefScore;
                        if(pMatch && mp.value === f.value && fp.value === m.value) isPerfect = true; 
                    }

                    if(q.type === 'dynamic') {
                        const mf = document.querySelector(`input[name="${q.id}-followup-male"]:checked`);
                        const ff = document.querySelector(`input[name="${q.id}-followup-female"]:checked`);
                        let dScore = 0;
                        if(mf && mf.value === f.value) dScore += parseInt(mf.dataset.score||4);
                        if(ff && ff.value === m.value) dScore += parseInt(ff.dataset.score||4);
                        scores.pref += dScore;
                    }

                    if(isPerfect || (q.type === 'similarity' && m.value === f.value)) {
                        details.perfect.push({ text: q.type==='crossover' ? q.text_me : q.text });
                    }
                }
            });

            const finalSim = Math.min(100, (scores.sim / 40) * 100); 
            const finalPref = Math.min(100, (scores.pref / 80) * 100); 
            
            let diffSq = 0;
            const groups = Object.keys(sensoryProfiles);
            groups.forEach(g => {
                const mVal = (maleCounts[g]||0), fVal = (femaleCounts[g]||0);
                diffSq += Math.pow(mVal - fVal, 2);
            });
            const finalShape = Math.max(0, 100 - (Math.sqrt(diffSq) * 10)); 
            const totalScore = (finalShape * 0.7) + (finalSim * 0.15) + (finalPref * 0.15);
            
            showResults({
                total: Math.round(totalScore),
                maleCounts, femaleCounts,
                details
            });
        });

        function getGroup(tag) {
            for(const [key, val] of Object.entries(tagGroups)) {
                if(val.tags.includes(tag)) return key;
            }
            return null;
        }

        function showResults(data) {
            document.getElementById('question-section').classList.add('hidden');
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            window.scrollTo(0, 0);

            // ì ìˆ˜ ëŒ€ì‹  í…ìŠ¤íŠ¸ ë³€í™˜ ë¡œì§
            let resultKeyword = "";
            let title = "", sub = "";
            
            if (data.total >= 85) { 
                resultKeyword = "í•˜ë‚˜ë¡œ ì´ì–´ì§€ëŠ” ê²°";
                title = "ì˜í˜¼ê¹Œì§€ ë‹®ì€ ë°ì¹¼ì½”ë§ˆë‹ˆ"; 
            } else if (data.total >= 70) { 
                resultKeyword = "ë¶€ë“œëŸ½ê²Œ ì–´ìš°ëŸ¬ì§„ ê²°";
                title = "ì„œë¡œì—ê²Œ ìŠ¤ë©°ë“œëŠ” ë¬¼ê°"; 
            } else if (data.total >= 50) { 
                resultKeyword = "ì„œë¡œë¥¼ ì±„ì›Œì£¼ëŠ” ê²°";
                title = "ë§ì¶°ê°€ëŠ” í¼ì¦ ì¡°ê°"; 
            } else { 
                resultKeyword = "ìƒˆë¡œìš´ ìê·¹ì„ ì£¼ëŠ” ê²°";
                title = "ìì„ ê°™ì€ Nê·¹ê³¼ Sê·¹"; 
            }

            document.getElementById('result-keyword').innerText = resultKeyword;
            document.getElementById('couple-title').innerText = title;

            // í”„ë¡œí•„ ì„¤ì •
            const getDominant = (counts) => Object.keys(counts).length ? Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b) : 'ADAPTIVE_BALANCED';
            const mDom = getDominant(data.maleCounts);
            const fDom = getDominant(data.femaleCounts);
            
            let oneLiner = "";
            if(mDom === fDom) oneLiner = `ë‘ ë¶„ì€ ëª¨ë‘ <b>'${sensoryProfiles[mDom].name}'</b>ì„ í•µì‹¬ ì„±í–¥ìœ¼ë¡œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì„¸ìƒì„ ë°”ë¼ë³´ëŠ” ì‹œì„ ì´ ë¹„ìŠ·í•´ í¸ì•ˆí•¨ì„ ëŠë¼ì§€ë§Œ, ê°€ë”ì€ ë„ˆë¬´ ê°™ì•„ì„œ ì§€ë£¨í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì„œë¡œì˜ ê±°ìš¸ ê°™ì€ ëª¨ìŠµì„ ì•„ê»´ì£¼ì„¸ìš”.`;
            else oneLiner = `ë‚¨ìëŠ” <b>'${sensoryProfiles[mDom].name}'</b>, ì—¬ìëŠ” <b>'${sensoryProfiles[fDom].name}'</b>ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ì„œë¡œ ë‹¤ë¥¸ ë¬´ëŠ¬ê°€ ë§Œë‚˜ ë” ì•„ë¦„ë‹¤ìš´ ê·¸ë¦¼ì´ ë©ë‹ˆë‹¤. ë‚¨ìì˜ ì¥ì ì´ ì—¬ìì˜ ë¶€ì¡±í•¨ì„ ì±„ì›Œì£¼ê³ , ì—¬ìì˜ ê°•ì ì´ ë‚¨ìë¥¼ ì´ëŒì–´ì£¼ëŠ” ìƒí˜¸ë³´ì™„ì ì¸ ê´€ê³„ì…ë‹ˆë‹¤.`;
            document.getElementById('result-one-liner').innerHTML = oneLiner;

            document.getElementById('result-group-name-male').innerText = sensoryProfiles[mDom].name;
            document.getElementById('result-group-description-male').innerText = sensoryProfiles[mDom].description;
            document.getElementById('result-group-name-female').innerText = sensoryProfiles[fDom].name;
            document.getElementById('result-group-description-female').innerText = sensoryProfiles[fDom].description;

            drawRadar(data.maleCounts, data.femaleCounts);

            // Perfect Match List
            const pmList = document.getElementById('perfect-match-list');
            const pmSection = document.getElementById('perfect-match-section');
            pmList.innerHTML = '';
            
            if(data.details.perfect.length > 0) {
                pmSection.classList.remove('hidden');
                data.details.perfect.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'bg-white/80 p-3 rounded-lg border border-amber-200/50 flex justify-between items-center text-sm';
                    li.innerHTML = `
                        <span class="text-gray-700 font-medium truncate mr-2 flex-1">Q. ${item.text}</span>
                        <span class="bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded shrink-0">ì¼ì¹˜!</span>
                    `;
                    pmList.appendChild(li);
                });
            } else {
                pmSection.classList.add('hidden');
            }

            // Tarot
            const mTarot = tarotMap[mDom];
            const fTarot = tarotMap[fDom];
            
            document.getElementById('male-tarot-name').innerText = mTarot.name;
            document.getElementById('female-tarot-name').innerText = fTarot.name;
            document.getElementById('male-tarot-img').style.backgroundImage = `url(${mTarot.img})`;
            document.getElementById('female-tarot-img').style.backgroundImage = `url(${fTarot.img})`;

            const key1 = `${mDom}_${fDom}`;
            const key2 = `${fDom}_${mDom}`;
            let interpretation = tarotReadings[key1] || tarotReadings[key2] || tarotReadings['DEFAULT'];
            document.getElementById('tarot-compatibility-text').innerText = interpretation;
            
            document.getElementById('relationship-advice').innerText = "ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¸ì •í•  ë•Œ ê°€ì¥ ë¹›ë‚©ë‹ˆë‹¤. ì„œë¡œê°€ ë¬´ì—‡ì„ ì¢‹ì•„í•˜ëŠ”ì§€ ëŒ€í™”ë¥¼ í†µí•´ ë” ê¹Šì´ ì•Œì•„ê°€ë³´ì„¸ìš”.";
        }

        function drawRadar(male, female) {
            const ctx = document.getElementById('comparisonRadarChart').getContext('2d');
            const labels = Object.values(sensoryProfiles).map(p => p.name.split(' ')[0]); 
            const keys = Object.keys(sensoryProfiles);
            if(window.myRadar) window.myRadar.destroy();

            window.myRadar = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'ë‚¨ì', data: keys.map(k=>male[k]||0), borderColor: '#3B82F6', backgroundColor: 'rgba(59, 130, 246, 0.2)', pointBackgroundColor: '#3B82F6' },
                        { label: 'ì—¬ì', data: keys.map(k=>female[k]||0), borderColor: '#EC4899', backgroundColor: 'rgba(236, 72, 153, 0.2)', pointBackgroundColor: '#EC4899' }
                    ]
                },
                options: {
                    scales: { r: { suggestedMin: 0, suggestedMax: 5, pointLabels: { font: { family: "'Noto Serif KR', serif", size: 14 } } } },
                    plugins: { legend: { position: 'bottom', labels: { font: { family: "'Noto Sans KR'" } } } }
                }
            });
        }

        renderQuestions();
        document.getElementById('retry-btn').addEventListener('click', () => location.reload());
    </script>
</body>
</html>
